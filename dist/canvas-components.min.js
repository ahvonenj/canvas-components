"use strict";var CanvasComponentsUtil={debug:!0,IsUndefinedNullOrEmpty:function(n){return null==n||""===n},IsComponent:function(n){return!0},UUID:function(){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},Log:function(n){CanvasComponentsUtil.debug&&console.log(n)},Timestamp:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},Collides:function(n,o,t){var e=n.x,r=n.x+n.w,i=n.y,u=n.y+n.h;return r>=o&&e<=o&&u>=t&&i<=t}},CCUtil=CanvasComponentsUtil;;"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,t,o){return t&&_defineProperties(n.prototype,t),o&&_defineProperties(n,o),n}var CanvasComponentCollection=function(){function n(){_classCallCheck(this,n),this.collection={}}return _createClass(n,[{key:"AddComponent",value:function(n){return CCUtil.IsUndefinedNullOrEmpty(n)||!CCUtil.IsComponent(n)?(CCUtil.Log("Add: Component is null or given component is not a component"),!1):void 0===this.collection[n.id]?(this.collection[n.id]=n,!0):(CCUtil.Log("Add: ComponentCollection already has a component with id '".concat(n.id,"'")),!1)}},{key:"RemoveComponent",value:function(n){return!(CCUtil.IsUndefinedNullOrEmpty(n)||!CCUtil.IsComponent(n))&&(void 0!==this.collection[n.id]?(this.collection[n.id].Destroy(),delete this.collection[n.id],!0):(CCUtil.Log("Remove: Could not find a component with id '".concat(n.id,"'")),!1))}},{key:"FindComponent",value:function(n){return!(CCUtil.IsUndefinedNullOrEmpty(n)||!CCUtil.IsComponent(n))&&(void 0!==this.collection[n.id]?this.collection[n.id]:(CCUtil.Log("FindComponent: Could not find a component with id '".concat(n.id,"'")),null))}},{key:"FindComponentById",value:function(n){if(!CCUtil.IsUndefinedNullOrEmpty(n)){if(void 0!==this.collection[n])return this.collection[n];CCUtil.Log("FindComponentById: Could not find a component with id '".concat(n,"'"))}return null}},{key:"GetBoundingBoxes",value:function(){return Object.values(this.collection).map(function(n){return{component:n,BB:n._getBoundingBox()}})}},{key:"GetComponentsAtPoint",value:function(n,t){return Object.values(this.collection).map(function(n){return{component:n,BB:n._getBoundingBox()}}).filter(function(o){return CCUtil.Collides(o.BB,n,t)}).map(function(n){return n.component})}},{key:"GetComponents",value:function(){return Object.values(this.collection)}}]),n}();;"use strict";var CanvasComponent={BUTTON:1,CHECKBOX:2,PANEL:3,RADIO:4,TEXT_INPUT:5,LABEL:6,RANGE_SLIDER:7,PROGRESS_BAR:8,COMPONENT_LABEL:1e3,COMPONENT_EDITABLE_TEXT:1001};;"use strict";var ComponentEvent={CLICK:"click",DOUBLE_CLICK:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_MOVE:"mousemove",SCROLL:"scroll"};;"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}var Component=function(){function t(e,s,n,i){_classCallCheck(this,t),this.id=CCUtil.UUID(),CCUtil.IsUndefinedNullOrEmpty(s)&&console.error("Component: Canvas context is undefined or null!"),this.ctx=s,this.canvas=n,this.ComponentType=i||null,this.options=e,this.ComponentType>=1e3?this.isMetaComponent=!0:this.isMetaComponent=!1,this.hasFocus=!1,this.isMouseOver=!1,this.isDragged=!1,this.mouseEvents={},CCUtil.Log("Created component with type ".concat(this.ComponentType))}return _createClass(t,[{key:"on",value:function(t,e){-1!==Object.values(ComponentEvent).indexOf(t)?this.mouseEvents[t]=e.bind(this):console.error("Unsupported event '".concat(t,"' for component"))}},{key:"off",value:function(t,e){void 0!==this.mouseEvents[t]&&(this.mouseEvents[t]=null)}},{key:"_mouseEvent",value:function(t,e){switch(t){case ComponentEvent.CLICK:this.hasFocus=!0;break;case ComponentEvent.MOUSE_OVER:this.isMouseOver=!0;break;case ComponentEvent.MOUSE_OUT:this.isMouseOver=!1}void 0!==this.mouseEvents[t]&&null!==typeof this.mouseEvents[t]&&this.mouseEvents[t](e)}},{key:"_getBoundingBox",value:function(){if(this.ComponentType===CanvasComponent.RADIO)var t=this.options.x-this.options.radius,e=this.options.y-this.options.radius,s=2*this.options.radius,n=2*this.options.radius;else if(this.ComponentType===CanvasComponent.LABEL){this.ctx.textAlign="start",this.ctx.textBaseline="alphabetic",this.ctx.font="".concat(this.options.fontSize,"px ").concat(this.options.fontFamily);s=this.ctx.measureText(this.textContent).width,n=this.ctx.measureText("M").width,t=this.options.x,e=this.options.y-n}else t=this.options.x,e=this.options.y,s=this.options.width,n=this.options.height;return{x:t,y:e,w:s,h:n}}},{key:"_drawFocus",value:function(){}},{key:"Draw",value:function(){if(this.hasFocus){this.ctx.strokeStyle="magenta",this.ctx.fillStyle="magenta",this.ctx.lineWidth=2;var t=this._getBoundingBox();this.ctx.beginPath(),this.ctx.rect(t.x-3,t.y-3,t.w+6,t.h+6),this.ctx.closePath(),this.ctx.stroke()}}},{key:"Update",value:function(t,e){this.isDragged&&(this.options.x=e.x,this.options.y=e.y)}},{key:"Destroy",value:function(){}}]),t}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=_superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(o):r.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCButton=function(t){function e(t,o,n){var r;if(_classCallCheck(this,e),t=Object.assign({width:90,height:28,x:0,y:0,z:0,borderWidth:2,borderColor:"#000",backgroundColor:null},t),null===(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,n,CanvasComponent.BUTTON))).options.backgroundColor){var i=r.ctx.createLinearGradient(r.options.x+r.options.width/2,r.options.y,r.options.x+r.options.width/2,r.options.y+r.options.height);i.addColorStop(0,"rgb(244, 244, 244)"),i.addColorStop(1,"rgb(241, 241, 241"),r.options.backgroundColor=i}return r._componentLabel=new ComponentLabel({x:r.options.x+r.options.width/2,y:r.options.y+r.options.height/2},r.ctx),r}return _inherits(e,Component),_createClass(e,[{key:"SetText",value:function(t){this._componentLabel.SetText(t)}},{key:"GetText",value:function(){return this._componentLabel.GetText()}},{key:"Update",value:function(t,o){this._componentLabel.Update(t),_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){this.ctx.fillStyle=this.options.backgroundColor,this.ctx.strokeStyle=this.options.borderColor,this.ctx.lineWidth=this.options.borderWidth,this.ctx.beginPath(),this.ctx.rect(this.options.x,this.options.y,this.options.width,this.options.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this._componentLabel.Draw(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){switch(t){case ComponentEvent.MOUSE_OVER:document.body.style.cursor="pointer";break;case ComponentEvent.MOUSE_OUT:document.body.style.cursor="default"}_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=_superPropBase(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCCheckbox=function(t){function e(t,o,r){return _classCallCheck(this,e),t=Object.assign({width:15,height:15,x:0,y:0,z:0,borderWidth:2,borderColor:"#000000",fontSize:8,fontColor:"#000",backgroundColor:"#FFF"},t),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,r,CanvasComponent.CHECKBOX))}return _inherits(e,Component),_createClass(e,[{key:"Update",value:function(t,o){_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){this.ctx.fillStyle=this.options.backgroundColor,this.ctx.strokeStyle=this.options.borderColor,this.ctx.lineWidth=this.options.borderWidth,this.ctx.beginPath(),this.ctx.rect(this.options.x,this.options.y,this.options.width,this.options.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){switch(t){case ComponentEvent.MOUSE_OVER:document.body.style.cursor="pointer";break;case ComponentEvent.MOUSE_OUT:document.body.style.cursor="default"}_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=_superPropBase(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCPanel=function(t){function e(t,o,r){var n;if(_classCallCheck(this,e),t=Object.assign({width:150,height:150,x:0,y:0,z:0,borderWidth:2,borderColor:"#000",fontSize:8,fontColor:"#000",backgroundColor:null},t),null===(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,r,CanvasComponent.PANEL))).options.backgroundColor){var i=n.ctx.createLinearGradient(n.options.x+n.options.width/2,n.options.y,n.options.x+n.options.width/2,n.options.y+n.options.height);i.addColorStop(0,"rgb(244, 244, 244)"),i.addColorStop(1,"rgb(241, 241, 241"),n.options.backgroundColor=i}return n}return _inherits(e,Component),_createClass(e,[{key:"Update",value:function(t,o){_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){this.ctx.fillStyle=this.options.backgroundColor,this.ctx.strokeStyle=this.options.borderColor,this.ctx.lineWidth=this.options.borderWidth,this.ctx.beginPath(),this.ctx.rect(this.options.x,this.options.y,this.options.width,this.options.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=_superPropBase(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCRadioButton=function(t){function e(t,o,r){return _classCallCheck(this,e),t=Object.assign({x:0,y:0,z:0,radius:8,borderWidth:2,borderColor:"#000",fontSize:8,fontColor:"#000",backgroundColor:"#FFF"},t),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,r,CanvasComponent.RADIO))}return _inherits(e,Component),_createClass(e,[{key:"Update",value:function(t,o){_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){this.ctx.fillStyle=this.options.backgroundColor,this.ctx.strokeStyle=this.options.borderColor,this.ctx.lineWidth=this.options.borderWidth,this.ctx.beginPath(),this.ctx.arc(this.options.x,this.options.y,this.options.radius,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){switch(t){case ComponentEvent.MOUSE_OVER:document.body.style.cursor="pointer";break;case ComponentEvent.MOUSE_OUT:document.body.style.cursor="default"}_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=_superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(o):r.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCTextInput=function(t){function e(t,o,n){var r;return _classCallCheck(this,e),t=Object.assign({width:150,height:21,x:0,y:0,z:0,borderWidth:2,borderColor:"#000",backgroundColor:"#FFF"},t),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,n,CanvasComponent.TEXT_INPUT)))._componentText=new ComponentEditableText({x:r.options.x,y:r.options.y+r.options.height/2},r.ctx),r}return _inherits(e,Component),_createClass(e,[{key:"SetValue",value:function(t){this._componentText.SetValue(t)}},{key:"GetValue",value:function(){return this._componentText.GetValue()}},{key:"Update",value:function(t,o){this._componentText.Update(t),_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){this.ctx.fillStyle=this.options.backgroundColor,this.ctx.strokeStyle=this.options.borderColor,this.ctx.lineWidth=this.options.borderWidth,this.ctx.beginPath(),this.ctx.rect(this.options.x,this.options.y,this.options.width,this.options.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this._componentText.Draw(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){switch(t){case ComponentEvent.MOUSE_OVER:document.body.style.cursor="text";break;case ComponentEvent.MOUSE_OUT:document.body.style.cursor="default"}_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=_superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(o):r.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCLabel=function(t){function e(t,o,n){var r;return _classCallCheck(this,e),t=Object.assign({width:150,height:35,x:0,y:0,z:0,borderWidth:1,borderColor:"#000",fontSize:16,fontColor:"#000",fontFamily:"Arial",backgroundColor:"#FFF"},t),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,n,CanvasComponent.LABEL))).textContent="",r}return _inherits(e,Component),_createClass(e,[{key:"SetText",value:function(t){this.textContent=t}},{key:"Update",value:function(t,o){_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){this.ctx.textAlign="start",this.ctx.textBaseline="alphabetic",this.ctx.fillStyle=this.options.fontColor,this.ctx.strokeStyle=this.options.fontColor,this.ctx.font="".concat(this.options.fontSize,"px ").concat(this.options.fontFamily),this.ctx.beginPath(),this.ctx.fillText(this.textContent,this.options.x,this.options.y),this.ctx.closePath(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=_superPropBase(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCRangeSlider=function(t){function e(t,o,r){return _classCallCheck(this,e),t=Object.assign({width:200,height:50,x:0,y:0,z:0,borderWidth:1,borderColor:"#000",fontSize:8,fontColor:"#000",backgroundColor:"#FFF"},t),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,r,CanvasComponent.RANGE_SLIDER))}return _inherits(e,Component),_createClass(e,[{key:"Update",value:function(t,o){_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=_superPropBase(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(o):n.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CCProgressBar=function(t){function e(t,o,r){return _classCallCheck(this,e),t=Object.assign({width:200,height:50,x:0,y:0,z:0,borderWidth:1,borderColor:"#000",fontSize:8,fontColor:"#000",backgroundColor:"#FFF"},t),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,r,CanvasComponent.PROGRESS_BAR))}return _inherits(e,Component),_createClass(e,[{key:"Update",value:function(t,o){_get(_getPrototypeOf(e.prototype),"Update",this).call(this,t,o)}},{key:"Draw",value:function(){_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}},{key:"_mouseEvent",value:function(t,o){_get(_getPrototypeOf(e.prototype),"_mouseEvent",this).call(this,t,o)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=_superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(o):r.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ComponentLabel=function(t){function e(t,o,n,r){var i;return _classCallCheck(this,e),t=Object.assign({x:0,y:0,z:0,fontSize:12,fontColor:"#000",fontFamily:"Arial"},t),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,n,CanvasComponent.COMPONENT_LABEL))).textContent="",i}return _inherits(e,Component),_createClass(e,[{key:"SetText",value:function(t){this.textContent=t}},{key:"GetText",value:function(){return this.textContent}},{key:"Update",value:function(t,e){}},{key:"Draw",value:function(){this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle=this.options.fontColor,this.ctx.strokeStyle=this.options.fontColor,this.ctx.font="".concat(this.options.fontSize,"px ").concat(this.options.fontFamily),this.ctx.beginPath(),this.ctx.fillText(this.textContent,this.options.x,this.options.y),this.ctx.closePath(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}}]),e}();;"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=_superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(o):r.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ComponentEditableText=function(t){function e(t,o,n,r){var i;return _classCallCheck(this,e),t=Object.assign({x:0,y:0,z:0,fontSize:12,fontColor:"#000",fontFamily:"Arial"},t),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,o,n,CanvasComponent.COMPONENT_EDITABLE_TEXT))).value="",i}return _inherits(e,Component),_createClass(e,[{key:"SetValue",value:function(t){this.value=t}},{key:"GetValue",value:function(){return this.value}},{key:"Update",value:function(t,e){}},{key:"Draw",value:function(){this.ctx.textAlign="start",this.ctx.textBaseline="middle",this.ctx.fillStyle=this.options.fontColor,this.ctx.strokeStyle=this.options.fontColor,this.ctx.font="".concat(this.options.fontSize,"px ").concat(this.options.fontFamily),this.ctx.beginPath(),this.ctx.fillText(this.value,this.options.x,this.options.y),this.ctx.closePath(),_get(_getPrototypeOf(e.prototype),"Draw",this).call(this)}}]),e}();;"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var ComponentCanvas=function(){function t(e){_classCallCheck(this,t),CCUtil.IsUndefinedNullOrEmpty(e)?console.error("ComponentCanvas: Invalid selector "+e):(this.canvasselector=e,null!==document.querySelector(this.canvasselector)?(this.canvas=document.querySelector(this.canvasselector),this.ctx=this.canvas.getContext("2d"),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.CanvasComponentCollection=new CanvasComponentCollection,this.t={now:null,acc:0,dt:.01,last:0,step:1/60,time:0,ft:0},this.canvas.addEventListener("click",this.e_onClick.bind(this)),this.canvas.addEventListener("dblclick",this.e_onDblClick.bind(this)),this.canvas.addEventListener("mousedown",this.e_mouseDown.bind(this)),this.canvas.addEventListener("mouseup",this.e_mouseUp.bind(this)),this.canvas.addEventListener("mouseenter",this.e_mouseEnter.bind(this)),this.canvas.addEventListener("mouseleave",this.e_mouseLeave.bind(this)),this.canvas.addEventListener("mouseover",this.e_mouseOver.bind(this)),this.canvas.addEventListener("mouseout",this.e_mouseOut.bind(this)),this.canvas.addEventListener("mousemove",this.e_mouseMove.bind(this)),this.canvas.addEventListener("scroll",this.e_mouseScroll.bind(this)),this.mouseState={lx:-99999,ly:-99999,x:-99999,y:-99999,dx:-99999,dy:-99999,isDown:!1,downStartTime:0,downElapsedTime:0},this.componentsDragged=null,this.Loop()):console.error("ComponentCanvas: Could not get canvas "+this.canvasselector))}return _createClass(t,[{key:"CreateComponent",value:function(t,e){var n=null;if(t>=1e3)return CCUtil.Log("CreateComponent: Trying to instantiate Meta Component, ignoring"),!1;switch(t){case CanvasComponent.BUTTON:n=new CCButton(e,this.ctx);break;case CanvasComponent.CHECKBOX:n=new CCCheckbox(e,this.ctx);break;case CanvasComponent.PANEL:n=new CCPanel(e,this.ctx);break;case CanvasComponent.RADIO:n=new CCRadioButton(e,this.ctx);break;case CanvasComponent.TEXT_INPUT:n=new CCTextInput(e,this.ctx);break;case CanvasComponent.LABEL:n=new CCLabel(e,this.ctx);break;case CanvasComponent.RANGE_SLIDER:n=new CCRangeSlider(e,this.ctx);break;case CanvasComponent.PROGRESS_BAR:n=new CCProgressBar(e,this.ctx);break;default:CCUtil.Log("CreateComponent: Component creation failed (".concat(t,")"))}return this.AddComponent(n)}},{key:"AddComponent",value:function(t){return this.CanvasComponentCollection.AddComponent(t)?t:null}},{key:"RemoveComponent",value:function(t){return this.CanvasComponentCollection.RemoveComponent(t)}},{key:"FindComponent",value:function(t){return this.CanvasComponentCollection.FindComponent(t)}},{key:"FindComponentById",value:function(t){return this.CanvasComponentCollection.FindComponentById(component)}},{key:"GetContext",value:function(){return this.ctx}},{key:"Loop",value:function(){for(this.t.now=CCUtil.Timestamp(),this.t.ft=this.t.now-this.t.last,this.t.ft>.25&&(this.t.ft=.25),this.t.last=this.t.now,this.t.acc+=this.t.ft;this.t.acc>=this.t.dt;)this.Update(this.t.dt),this.t.time+=this.t.dt,this.t.acc-=this.t.dt;this.Draw(),requestAnimationFrame(function(){this.Loop()}.bind(this))}},{key:"Draw",value:function(){for(var t in this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.CanvasComponentCollection.collection)this.CanvasComponentCollection.collection.hasOwnProperty(t)&&this.CanvasComponentCollection.collection[t].Draw()}},{key:"Update",value:function(t){for(var e in this.mouseState.isDown&&(this.mouseState.downElapsedTime=this.t.time-this.mouseState.downStartTime,this.mouseState.downElapsedTime>5&&(this.componentsDragged=this.CanvasComponentCollection.GetComponentsAtPoint(this.mouseState.x,this.mouseState.y),this.componentsDragged.forEach(function(t){t.isDragged=!0}))),this.CanvasComponentCollection.collection)this.CanvasComponentCollection.collection.hasOwnProperty(e)&&this.CanvasComponentCollection.collection[e].Update(t,this.mouseState)}},{key:"e_onClick",value:function(t){var e=this.CanvasComponentCollection.GetComponentsAtPoint(t.clientX,t.clientY);this.CanvasComponentCollection.GetComponents().forEach(function(t){t.hasFocus=!1}),e.forEach(function(e){e._mouseEvent(ComponentEvent.CLICK,t)})}},{key:"e_onDblClick",value:function(t){}},{key:"e_mouseDown",value:function(t){this.mouseState.isDown=!0,this.mouseState.downStartTime=this.t.time}},{key:"e_mouseUp",value:function(t){this.mouseState.isDown=!1,this.componentsDragged.forEach(function(t){t.isDragged=!1})}},{key:"e_mouseEnter",value:function(t){}},{key:"e_mouseLeave",value:function(t){}},{key:"e_mouseOver",value:function(t){}},{key:"e_mouseOut",value:function(t){}},{key:"e_mouseMove",value:function(t){this.mouseState.lx=this.mouseState.x,this.mouseState.ly=this.mouseState.y,this.mouseState.x=t.clientX,this.mouseState.y=t.clientY,this.mouseState.dx=this.mouseState.x-this.mouseState.lx,this.mouseState.dy=this.mouseState.y-this.mouseState.ly,this.CanvasComponentCollection.GetComponents().forEach(function(e){CCUtil.Collides(e._getBoundingBox(),t.clientX,t.clientY)?e.isMouseOver||e._mouseEvent(ComponentEvent.MOUSE_OVER,t):e.isMouseOver&&e._mouseEvent(ComponentEvent.MOUSE_OUT,t)})}},{key:"e_mouseScroll",value:function(t){}}]),t}();
//# sourceMappingURL=canvas-components.min.js.map
