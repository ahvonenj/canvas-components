{"version":3,"sources":["canvas-components-util.js","canvas-components-collection.js","component-enum.js","component-events.js","component.js","button.js","checkbox.js","panel.js","radio.js","text-input.js","label.js","range-slider.js","progress-bar.js","component-label.js","component-editable-text.js","canvas-components.js"],"names":["CanvasComponentsUtil","debug","IsUndefinedNullOrEmpty","variable","IsComponent","possiblyComponent","UUID","s4","Math","floor","random","toString","substring","Log","str","console","log","Timestamp","window","performance","now","Date","getTime","Collides","rect","x","y","left","right","w","top","bottom","h","CCUtil","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","CanvasComponentCollection","this","collection","value","component","id","concat","Destroy","values","map","BB","_getBoundingBox","filter","BBObject","CanvasComponent","BUTTON","CHECKBOX","PANEL","RADIO","TEXT_INPUT","LABEL","RANGE_SLIDER","PROGRESS_BAR","COMPONENT_LABEL","COMPONENT_EDITABLE_TEXT","ComponentEvent","CLICK","DOUBLE_CLICK","MOUSE_DOWN","MOUSE_UP","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_OVER","MOUSE_OUT","MOUSE_MOVE","SCROLL","Component","options","ctx","canvas","componentType","error","ComponentType","isMetaComponent","hasFocus","isMouseOver","isDragged","mouseEvents","eventType","callback","indexOf","bind","e","radius","textAlign","textBaseline","font","fontSize","fontFamily","measureText","textContent","width","height","strokeStyle","fillStyle","lineWidth","bb","beginPath","closePath","stroke","dt","mouseState","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","CCButton","_Component","_this","assign","z","borderWidth","borderColor","backgroundColor","gradient","createLinearGradient","addColorStop","_componentLabel","ComponentLabel","SetText","GetText","Update","fill","Draw","document","body","style","cursor","CCCheckbox","fontColor","CCPanel","CCRadioButton","arc","PI","CCTextInput","_componentText","ComponentEditableText","SetValue","GetValue","CCLabel","fillText","CCRangeSlider","CCProgressBar","parentComponent","ComponentCanvas","canvasselector","querySelector","getContext","canvasWidth","canvasHeight","t","acc","last","step","time","ft","addEventListener","e_onClick","e_onDblClick","e_mouseDown","e_mouseUp","e_mouseEnter","e_mouseLeave","e_mouseOver","e_mouseOut","e_mouseMove","e_mouseScroll","lx","ly","dx","dy","isDown","downStartTime","downElapsedTime","componentsDragged","Loop","AddComponent","RemoveComponent","FindComponent","FindComponentById","requestAnimationFrame","clearRect","GetComponentsAtPoint","forEach","components","clientX","clientY","GetComponents","_mouseEvent"],"mappings":"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","file":"canvas-components.min.js","sourcesContent":["// \"Static\" Canvas Component Utility Class\r\nvar CanvasComponentsUtil = \r\n{ \r\n\tdebug: true\r\n};\r\n\r\nCanvasComponentsUtil.IsUndefinedNullOrEmpty = function(variable)\r\n{\r\n\tif(typeof variable === 'undefined' ||\r\n\t\tvariable === null ||\r\n\t\tvariable === '')\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nCanvasComponentsUtil.IsComponent = function(possiblyComponent)\r\n{\r\n\t// Fails after transplying\r\n\t//return Object.getPrototypeOf(possiblyComponent.constructor).name === 'Component';\r\n\treturn true;\r\n}\r\n\r\n// Component unique id generator method\r\nCanvasComponentsUtil.UUID = function()\r\n{\r\n\tfunction s4() \r\n\t{\r\n\t\treturn Math.floor((1 + Math.random()) * 0x10000)\r\n\t\t.toString(16)\r\n\t\t.substring(1);\r\n\t}\r\n\r\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n}\r\n\r\nCanvasComponentsUtil.Log = function(str)\r\n{\r\n\tif(CanvasComponentsUtil.debug)\r\n\t\tconsole.log(str);\r\n}\r\n\r\nCanvasComponentsUtil.Timestamp = function()\r\n{\r\n\treturn window.performance && window.performance.now ? window.performance.now() : new Date().getTime();\r\n}\r\n\r\n// Basic point-rectangle collision checking method\r\nCanvasComponentsUtil.Collides = function(rect, x, y) \r\n{\r\n\tvar left = rect.x;\r\n\tvar right = rect.x + rect.w;\r\n\tvar top = rect.y;\r\n\tvar bottom = rect.y + rect.h;\r\n\r\n\tif (right >= x && left <= x && bottom >= y && top <= y) \r\n\t\treturn true;\r\n\r\n\treturn false;\r\n}\r\n\r\nvar CCUtil = CanvasComponentsUtil;","// Collection class for Canvas Components\r\nclass CanvasComponentCollection\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tthis.collection = {};\r\n\t}\r\n\t\r\n\t// Add component to the collection\r\n\tAddComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Add: Component is null or given component is not a component`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(typeof this.collection[component.id] === 'undefined')\r\n\t\t{\r\n\t\t\tthis.collection[component.id] = component;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Add: ComponentCollection already has a component with id '${component.id}'`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove component from the collection\r\n\tRemoveComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t\treturn false;\r\n\r\n\t\tif(typeof this.collection[component.id] !== 'undefined')\r\n\t\t{\r\n\t\t\tthis.collection[component.id].Destroy();\r\n\t\t\tdelete this.collection[component.id];\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Remove: Could not find a component with id '${component.id}'`);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Find component in the collection by component\r\n\tFindComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t\treturn false;\r\n\t\t\r\n\t\tif(typeof this.collection[component.id] !== 'undefined')\r\n\t\t{\r\n\t\t\treturn this.collection[component.id];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`FindComponent: Could not find a component with id '${component.id}'`);\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Find component in the collection by a component unique id\r\n\tFindComponentById(id)\r\n\t{\r\n\t\tif(!CCUtil.IsUndefinedNullOrEmpty(id))\r\n\t\t{\r\n\t\t\tif(typeof this.collection[id] !== 'undefined')\r\n\t\t\t{\r\n\t\t\t\treturn this.collection[id];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tCCUtil.Log(`FindComponentById: Could not find a component with id '${id}'`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Returns a bounding box and a component ref for every component in collection\r\n\tGetBoundingBoxes()\r\n\t{\r\n\t\treturn Object.values(this.collection).map(function(component)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponent: component,\r\n\t\t\t\tBB: component._getBoundingBox()\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\t// Returns all components whose bounding box collide with given x, y\r\n\tGetComponentsAtPoint(x, y)\r\n\t{\r\n\t\treturn Object.values(this.collection).map(function(component)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponent: component,\r\n\t\t\t\tBB: component._getBoundingBox()\r\n\t\t\t};\r\n\t\t}).filter(function(BBObject)\r\n\t\t{\r\n\t\t\treturn CCUtil.Collides(BBObject.BB, x, y);\r\n\t\t}).map(function(BBObject)\r\n\t\t{\r\n\t\t\treturn BBObject.component;\r\n\t\t});\r\n\t}\r\n\r\n\t// Returns all components\r\n\tGetComponents()\r\n\t{\r\n\t\treturn Object.values(this.collection);\r\n\t}\r\n}\r\n\r\n","// Component enumeration for each available Canvas Component\r\nvar CanvasComponent = \r\n{\r\n\tBUTTON: 1,\r\n\tCHECKBOX: 2,\r\n\tPANEL: 3,\r\n\tRADIO: 4,\r\n\tTEXT_INPUT: 5,\r\n\tLABEL: 6,\r\n\r\n\tRANGE_SLIDER: 7,\r\n\tPROGRESS_BAR: 8,\r\n\r\n\r\n\tCOMPONENT_LABEL: 1000,\r\n\tCOMPONENT_EDITABLE_TEXT: 1001\r\n}","// \"Enum\" of supported Canvas Component events\r\nvar ComponentEvent =\r\n{\r\n\tCLICK: 'click',\r\n\tDOUBLE_CLICK: 'dblclick',\r\n\tMOUSE_DOWN: 'mousedown',\r\n\tMOUSE_UP: 'mouseup',\r\n\tMOUSE_ENTER: 'mouseenter',\r\n\tMOUSE_LEAVE: 'mouseleave',\r\n\tMOUSE_OVER: 'mouseover',\r\n\tMOUSE_OUT: 'mouseout',\r\n\tMOUSE_MOVE: 'mousemove',\r\n\tSCROLL: 'scroll'\r\n};","// Component superclass for all Canvas Components\r\nclass Component\r\n{\r\n\tconstructor(options, ctx, canvas, componentType)\r\n\t{\r\n\t\t// Generate unique id for the component\r\n\t\tthis.id = CCUtil.UUID();\r\n\r\n\t\t// Log error if canvas context is not given\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(ctx))\r\n\t\t\tconsole.error('Component: Canvas context is undefined or null!');\r\n\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.ComponentType = componentType || null;\r\n\t\tthis.options = options;\r\n\r\n\t\tif(this.ComponentType >= 1000)\r\n\t\t\tthis.isMetaComponent = true;\r\n\t\telse\r\n\t\t\tthis.isMetaComponent = false;\r\n\r\n\t\t// Events related attributes\r\n\t\tthis.hasFocus = false;\r\n\t\tthis.isMouseOver = false;\r\n\t\tthis.isDragged = false;\r\n\r\n\t\t// Custom events bound to the component\r\n\t\tthis.mouseEvents = { };\r\n\r\n\t\tCCUtil.Log(`Created component with type ${this.ComponentType}`);\r\n\t}\r\n\r\n\t// Used to bind custom events to components. Does not override default event behaviour by default.\r\n\ton(eventType, callback)\r\n\t{\r\n\t\tif(Object.values(ComponentEvent).indexOf(eventType) === -1)\r\n\t\t{\r\n\t\t\tconsole.error(`Unsupported event '${eventType}' for component`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.mouseEvents[eventType] = callback.bind(this);\r\n\t}\r\n\r\n\t// Used to unbind custom events to components.\r\n\toff(eventType, callback)\r\n\t{\r\n\t\tif(typeof this.mouseEvents[eventType] !== 'undefined')\r\n\t\t\tthis.mouseEvents[eventType] = null;\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.hasFocus = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tthis.isMouseOver = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tthis.isMouseOver = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(typeof this.mouseEvents[eventType] !== 'undefined' &&\r\n\t\t   typeof this.mouseEvents[eventType] !== null)\r\n\t\t{\r\n\t\t\tthis.mouseEvents[eventType](e);\r\n\t\t}\r\n\t}\r\n\r\n\t// Returns the 2D bounding box of the component\r\n\t_getBoundingBox()\r\n\t{\r\n\t\t// Radio button is circular, so calculate x, y, w, h from radius\r\n\t\tif(this.ComponentType === CanvasComponent.RADIO)\r\n\t\t{\r\n\t\t\tvar x = this.options.x - this.options.radius;\r\n\t\t\tvar y = this.options.y - this.options.radius;\r\n\t\t\tvar w = this.options.radius * 2;\r\n\t\t\tvar h = this.options.radius * 2;\r\n\t\t}\r\n\t\telse if(this.ComponentType === CanvasComponent.LABEL)\r\n\t\t{\r\n\t\t\t// WARNING: HUGE HACK (Canvas text bounding box not easy, this gives decent estimate)\r\n\t\t\t// https://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\r\n\t\t\t// https://stackoverflow.com/questions/14836350/how-to-get-the-bounding-box-of-a-text-using-html5-canvas\r\n\t\t\t// https://galactic.ink/journal/2011/01/html5-typographic-metrics/#bboxUnicode\r\n\t\t\tthis.ctx.textAlign = \"start\";\r\n\t\t\tthis.ctx.textBaseline = \"alphabetic\";\r\n\t\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\t\tvar w = this.ctx.measureText(this.textContent).width;\r\n\t\t\tvar h = this.ctx.measureText('M').width;\r\n\t\t\tvar x = this.options.x;\r\n\t\t\tvar y = this.options.y - h;\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar x = this.options.x;\r\n\t\t\tvar y = this.options.y;\r\n\t\t\tvar w = this.options.width;\r\n\t\t\tvar h = this.options.height;\r\n\t\t}\r\n\r\n\t\treturn { x: x, y: y, w: w, h: h };\r\n\t}\r\n\r\n\t// Debug method. Draws a magenta bounding box border around a component when it has focus\r\n\t_drawFocus()\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Component draw function\r\n\tDraw()\r\n\t{\r\n\t\tif(this.hasFocus)\r\n\t\t{\r\n\t\t\tthis.ctx.strokeStyle = 'magenta';\r\n\t\t\tthis.ctx.fillStyle = 'magenta';\r\n\t\t\tthis.ctx.lineWidth = 2;\r\n\r\n\t\t\tvar bb = this._getBoundingBox();\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tthis.ctx.rect(\r\n\t\t\t\tbb.x - 3, \r\n\t\t\t\tbb.y - 3, \r\n\t\t\t\tbb.w + 6, \r\n\t\t\t\tbb.h + 6\r\n\t\t\t);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\t}\r\n\r\n\t// Component update function\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tif(this.isDragged)\r\n\t\t{\r\n\t\t\tthis.options.x = mouseState.x;\r\n\t\t\tthis.options.y = mouseState.y;\r\n\t\t}\r\n\t}\r\n\r\n\t// Component destroy method\r\n\tDestroy()\r\n\t{\r\n\t\t\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentButton (CCButton)\r\n\tDESC: Button component\r\n*/\r\nclass CCButton extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 90, \r\n\t\t\theight: 28,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tbackgroundColor: null\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.BUTTON);\r\n\r\n\t\t// Default gradient shading\r\n\t\tif(this.options.backgroundColor === null)\r\n\t\t{\r\n\t\t\tvar gradient = this.ctx.createLinearGradient(\r\n\t\t\t\tthis.options.x + (this.options.width / 2), \r\n\t\t\t\tthis.options.y,\r\n\t\t\t\tthis.options.x + (this.options.width / 2),\r\n\t\t\t\tthis.options.y + this.options.height\r\n\t\t\t);\r\n\r\n\t\t\tgradient.addColorStop(0, 'rgb(244, 244, 244)');\r\n\t\t\tgradient.addColorStop(1, 'rgb(241, 241, 241');\r\n\r\n\t\t\tthis.options.backgroundColor = gradient;\r\n\t\t}\r\n\r\n\t\t// Instantiate the text of the button as a ComponentLabel\r\n\t\tthis._componentLabel = new ComponentLabel(\r\n\t\t{\r\n\t\t\tx: this.options.x + (this.options.width / 2),\r\n\t\t\ty: this.options.y + (this.options.height / 2)\r\n\t\t}, this.ctx);\r\n\t}\r\n\r\n\t// Set button text\r\n\tSetText(str)\r\n\t{\r\n\t\tthis._componentLabel.SetText(str);\r\n\t}\r\n\r\n\t// Get button text\r\n\tGetText()\r\n\t{\r\n\t\treturn this._componentLabel.GetText();\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tthis._componentLabel.Update(dt);\r\n\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis._componentLabel.Draw();\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentCheckbox (CCCheckbox)\r\n\tDESC: Checkbox component\r\n*/\r\nclass CCCheckbox extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 15, \r\n\t\t\theight: 15,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.CHECKBOX);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentPanel (CCPanel)\r\n\tDESC: Panel component\r\n*/\r\nclass CCPanel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 150,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: null\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.PANEL);\r\n\r\n\t\t// Default gradient shading\r\n\t\tif(this.options.backgroundColor === null)\r\n\t\t{\r\n\t\t\tvar gradient = this.ctx.createLinearGradient(\r\n\t\t\t\tthis.options.x + (this.options.width / 2), \r\n\t\t\t\tthis.options.y,\r\n\t\t\t\tthis.options.x + (this.options.width / 2),\r\n\t\t\t\tthis.options.y + this.options.height\r\n\t\t\t);\r\n\r\n\t\t\tgradient.addColorStop(0, 'rgb(244, 244, 244)');\r\n\t\t\tgradient.addColorStop(1, 'rgb(241, 241, 241');\r\n\r\n\t\t\tthis.options.backgroundColor = gradient;\r\n\t\t}\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\t//this.ctx.clip();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentRadioButton (CCRadioButton)\r\n\tDESC: Radio button component\r\n*/\r\nclass CCRadioButton extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\t\t\tradius: 8,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.RADIO);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.arc(this.options.x, this.options.y, this.options.radius, 0, 2 * Math.PI);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentTextInput (CCTextInput)\r\n\tDESC: Text input component\r\n*/\r\nclass CCTextInput extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 21,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.TEXT_INPUT);\r\n\r\n\t\tthis._componentText = new ComponentEditableText(\r\n\t\t{\r\n\t\t\tx: this.options.x,\r\n\t\t\ty: this.options.y + (this.options.height / 2)\r\n\t\t}, this.ctx);\r\n\t}\r\n\r\n\t// Set text input value\r\n\tSetValue(str)\r\n\t{\r\n\t\tthis._componentText.SetValue(str);\r\n\t}\r\n\r\n\t// Get text input value\r\n\tGetValue()\r\n\t{\r\n\t\treturn this._componentText.GetValue();\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tthis._componentText.Update(dt);\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis._componentText.Draw();\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'text';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentLabel (CCLabel)\r\n\tDESC: Label component\r\n*/\r\nclass CCLabel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 35,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 16,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.LABEL);\r\n\r\n\t\tthis.textContent = '';\r\n\t}\r\n\r\n\tSetText(str)\r\n\t{\r\n\t\tthis.textContent = str;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"start\";\r\n\t\tthis.ctx.textBaseline = \"alphabetic\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.textContent, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentRangeSlider (CCRangeSlider)\r\n\tDESC: Range slider component\r\n*/\r\nclass CCRangeSlider extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 200, \r\n\t\t\theight: 50,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.RANGE_SLIDER);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentProgressBar (CCProgressBar)\r\n\tDESC: Progress bar component\r\n*/\r\nclass CCProgressBar extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 200, \r\n\t\t\theight: 50,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.PROGRESS_BAR);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: ComponentLabel\r\n\tDESC: Meta label component\r\n*/\r\nclass ComponentLabel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas, parentComponent)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.COMPONENT_LABEL);\r\n\r\n\t\t/*if(CCUtil.IsUndefinedNullOrEmpty(parentComponent))\r\n\t\t\tCCUtil.Log(`Parent component could not be inherited for ComponentLabel#${this.id}`);\r\n\r\n\t\tthis.parentComponent = parentComponent;*/\r\n\t\tthis.textContent = '';\r\n\t}\r\n\r\n\t// Set component label text\r\n\tSetText(str)\r\n\t{\r\n\t\tthis.textContent = str;\r\n\t}\r\n\r\n\t// Get component label text\r\n\tGetText()\r\n\t{\r\n\t\treturn this.textContent;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\t//super.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"center\";\r\n\t\tthis.ctx.textBaseline = \"middle\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.textContent, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n}","/*\r\n\tCLASS: ComponentLabel\r\n\tDESC: Meta label component\r\n*/\r\nclass ComponentEditableText extends Component\r\n{\r\n\tconstructor(options, ctx, canvas, parentComponent)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.COMPONENT_EDITABLE_TEXT);\r\n\r\n\t\t/*if(CCUtil.IsUndefinedNullOrEmpty(parentComponent))\r\n\t\t\tCCUtil.Log(`Parent component could not be inherited for ComponentEditableText#${this.id}`);\r\n\r\n\t\tthis.parentComponent = parentComponent;*/\r\n\t\tthis.value = '';\r\n\t}\r\n\r\n\t// Set editable text value\r\n\tSetValue(str)\r\n\t{\r\n\t\tthis.value = str;\r\n\t}\r\n\r\n\t// Get editable text value\r\n\tGetValue()\r\n\t{\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\t//super.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"start\";\r\n\t\tthis.ctx.textBaseline = \"middle\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.value, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n}","// Main class for Canvas Components\r\nclass ComponentCanvas\r\n{\r\n\tconstructor(canvasselector)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(canvasselector))\r\n\t\t{\r\n\t\t\tconsole.error('ComponentCanvas: Invalid selector ' + canvasselector);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.canvasselector = canvasselector;\r\n\r\n\t\tif(document.querySelector(this.canvasselector) === null)\r\n\t\t{\r\n\t\t\tconsole.error('ComponentCanvas: Could not get canvas ' + this.canvasselector);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Canvas attributes\r\n\t\tthis.canvas = document.querySelector(this.canvasselector);\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t\tthis.canvasWidth = this.canvas.width;\r\n\t\tthis.canvasHeight = this.canvas.height;\r\n\r\n\t\t// Instantiate CanvasComponentCollection to hold the components in\r\n\t\tthis.CanvasComponentCollection = new CanvasComponentCollection();\r\n\r\n\t\t// Main update and draw loop timing setup\r\n\t\tthis.t = \r\n\t\t{\r\n\t\t\tnow: null,\r\n\t\t\tacc: 0,\r\n\t\t\tdt: 0.01,\r\n\t\t\tlast: 0,\r\n\t\t\tstep: 1/60,\r\n\t\t\ttime: 0,\r\n\t\t\tft: 0\r\n\t\t}\r\n\r\n\t\t// Bind all the native event listeners and screw them up later with cool custom things\r\n\t\tthis.canvas.addEventListener('click', this.e_onClick.bind(this));\r\n\t\tthis.canvas.addEventListener('dblclick', this.e_onDblClick.bind(this));\r\n\t\tthis.canvas.addEventListener('mousedown', this.e_mouseDown.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseup', this.e_mouseUp.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseenter', this.e_mouseEnter.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseleave', this.e_mouseLeave.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseover', this.e_mouseOver.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseout', this.e_mouseOut.bind(this));\r\n\t\tthis.canvas.addEventListener('mousemove', this.e_mouseMove.bind(this));\r\n\t\tthis.canvas.addEventListener('scroll', this.e_mouseScroll.bind(this));\r\n\r\n\t\t// Event related attributes\r\n\t\tthis.mouseState = \r\n\t\t{\r\n\t\t\tlx: -99999,\t\t// Mouse last x\r\n\t\t\tly: -99999,\t\t// Mouse last y\r\n\t\t\tx: -99999,\t\t// Mouse x\r\n\t\t\ty: -99999,\t\t// Mouse y\r\n\t\t\tdx: -99999,\t\t// Mouse delta x\r\n\t\t\tdy: -99999,\t\t// Mouse delta y\r\n\r\n\t\t\tisDown: false,\r\n\r\n\t\t\tdownStartTime: 0,\r\n\t\t\tdownElapsedTime: 0\r\n\t\t};\r\n\r\n\t\tthis.componentsDragged = null;\r\n\r\n\t\t// Start main update and draw loop\r\n\t\tthis.Loop();\r\n\t}\r\n\r\n\t// Main component creation method\r\n\tCreateComponent(componentType, options)\r\n\t{\r\n\t\tvar component = null;\r\n\r\n\t\t// Meta component, skip\r\n\t\tif(componentType >= 1000)\r\n\t\t{\r\n\t\t\tCCUtil.Log(`CreateComponent: Trying to instantiate Meta Component, ignoring`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tswitch(componentType)\r\n\t\t{\r\n\t\t\tcase CanvasComponent.BUTTON:\r\n\t\t\t\tcomponent = new CCButton(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.CHECKBOX:\r\n\t\t\t\tcomponent = new CCCheckbox(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.PANEL:\r\n\t\t\t\tcomponent = new CCPanel(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.RADIO:\r\n\t\t\t\tcomponent = new CCRadioButton(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.TEXT_INPUT:\r\n\t\t\t\tcomponent = new CCTextInput(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.LABEL:\r\n\t\t\t\tcomponent = new CCLabel(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.RANGE_SLIDER:\r\n\t\t\t\tcomponent = new CCRangeSlider(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.PROGRESS_BAR:\r\n\t\t\t\tcomponent = new CCProgressBar(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tCCUtil.Log(`CreateComponent: Component creation failed (${componentType})`);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Returns the component or false\r\n\t\treturn this.AddComponent(component);\r\n\t}\r\n\r\n\t// Higher level method to add component into the CanvasComponentCollection\r\n\tAddComponent(component)\r\n\t{\r\n\t\tif(this.CanvasComponentCollection.AddComponent(component))\r\n\t\t\treturn component;\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\t// Higher level method to remove component from the CanvasComponentCollection\r\n\tRemoveComponent(component)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.RemoveComponent(component);\r\n\t}\r\n\r\n\t// Higher level method to find a component from the CanvasComponentCollection\r\n\tFindComponent(component)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.FindComponent(component);\r\n\t}\r\n\r\n\t// Higher level method to find a component by unique id from the CanvasComponentCollection\r\n\tFindComponentById(id)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.FindComponentById(component);\r\n\t}\r\n\r\n\tGetContext()\r\n\t{\r\n\t\treturn this.ctx;\r\n\t}\r\n\r\n\t// Actually the main loop\r\n\tLoop()\r\n\t{\r\n\t\tthis.t.now = CCUtil.Timestamp();\r\n\t\tthis.t.ft = this.t.now - this.t.last;\r\n\r\n\t\tif(this.t.ft > 0.25)\r\n\t\t\tthis.t.ft = 0.25;\r\n\r\n\t\tthis.t.last = this.t.now; \r\n\t\tthis.t.acc += this.t.ft;\r\n\r\n\t\twhile(this.t.acc >= this.t.dt) \r\n\t\t{\r\n\t\t\tthis.Update(this.t.dt);\r\n\t\t\t\r\n\t\t\tthis.t.time += this.t.dt;\r\n\t\t\tthis.t.acc -= this.t.dt;\r\n\t\t}\r\n\r\n\t\tthis.Draw();\r\n\t\trequestAnimationFrame(function() { this.Loop(); }.bind(this));\r\n\t}\r\n\r\n\t// Main component draw method and loop\r\n\tDraw()\r\n\t{\r\n\t\t// Clear the canvas, optimize later if enough brain\r\n\t\tthis.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n\t\t// Draw everything\r\n\t\tfor(var component in this.CanvasComponentCollection.collection)\r\n\t\t{\r\n\t\t\tif(!this.CanvasComponentCollection.collection.hasOwnProperty(component))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tthis.CanvasComponentCollection.collection[component].Draw();\r\n\t\t}\r\n\t}\r\n\r\n\t// Main component update method and loop\r\n\tUpdate(dt)\r\n\t{\r\n\t\tif(this.mouseState.isDown)\r\n\t\t{\r\n\t\t\tthis.mouseState.downElapsedTime = this.t.time - this.mouseState.downStartTime;\r\n\r\n\t\t\tif(this.mouseState.downElapsedTime > 5)\r\n\t\t\t{\r\n\t\t\t\t// Get all components under mouse click coordinates\r\n\t\t\t\tthis.componentsDragged = this.CanvasComponentCollection.GetComponentsAtPoint(this.mouseState.x, this.mouseState.y);\r\n\r\n\t\t\t\t// Set focus of every component to false\r\n\t\t\t\tthis.componentsDragged.forEach(function(component)\r\n\t\t\t\t{\r\n\t\t\t\t\tcomponent.isDragged = true;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var component in this.CanvasComponentCollection.collection)\r\n\t\t{\r\n\t\t\tif(!this.CanvasComponentCollection.collection.hasOwnProperty(component))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tthis.CanvasComponentCollection.collection[component].Update(dt, this.mouseState);\r\n\t\t}\r\n\t}\r\n\r\n\t// Click event handler\r\n\te_onClick(e)\r\n\t{\r\n\t\t// Get all components under mouse click coordinates\r\n\t\tvar components = this.CanvasComponentCollection.GetComponentsAtPoint(e.clientX, e.clientY);\r\n\r\n\t\t// Set focus of every component to false\r\n\t\tthis.CanvasComponentCollection.GetComponents().forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent.hasFocus = false;\r\n\t\t});\r\n\r\n\t\t// Call the click events of all components returned by GetComponentsAtPoint\r\n\t\tcomponents.forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent._mouseEvent(ComponentEvent.CLICK, e);\r\n\t\t});\r\n\t}\r\n\r\n\t// Double click event handler\r\n\te_onDblClick(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse down event handler\r\n\te_mouseDown(e)\r\n\t{\r\n\t\tthis.mouseState.isDown = true;\r\n\t\tthis.mouseState.downStartTime = this.t.time;\r\n\t}\r\n\r\n\t// Mouse up event handler\r\n\te_mouseUp(e)\r\n\t{\r\n\t\tthis.mouseState.isDown = false;\r\n\r\n\t\tthis.componentsDragged.forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent.isDragged = false;\r\n\t\t});\r\n\t}\r\n\r\n\t// Mouse enter event handler\r\n\te_mouseEnter(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse leave event handler\r\n\te_mouseLeave(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse over event handler\r\n\te_mouseOver(e)\r\n\t{\r\n\r\n\t}\r\n\r\n\t// Mouse out event handler\r\n\te_mouseOut(e)\r\n\t{\r\n\r\n\t}\r\n\r\n\t// Mouse move event handler\r\n\te_mouseMove(e)\r\n\t{\r\n\t\tthis.mouseState.lx = this.mouseState.x;\r\n\t\tthis.mouseState.ly = this.mouseState.y;\r\n\t\tthis.mouseState.x = e.clientX;\r\n\t\tthis.mouseState.y = e.clientY;\r\n\t\tthis.mouseState.dx = this.mouseState.x - this.mouseState.lx;\r\n\t\tthis.mouseState.dy = this.mouseState.y - this.mouseState.ly;\r\n\r\n\t\t// Should probably move this to Update loop\r\n\t\tthis.CanvasComponentCollection.GetComponents().forEach(function(component)\r\n\t\t{\r\n\t\t\tif(CCUtil.Collides(component._getBoundingBox(), e.clientX, e.clientY))\r\n\t\t\t{\r\n\t\t\t\tif(!component.isMouseOver)\r\n\t\t\t\t\tcomponent._mouseEvent(ComponentEvent.MOUSE_OVER, e);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(component.isMouseOver)\r\n\t\t\t\t\tcomponent._mouseEvent(ComponentEvent.MOUSE_OUT, e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Mouse scroll event handler\r\n\te_mouseScroll(e)\r\n\t{\r\n\t\t\r\n\t}\r\n}"]}