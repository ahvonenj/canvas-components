{"version":3,"sources":["canvas-components-util.js","canvas-components-collection.js","component-enum.js","component-events.js","component.js","button.js","checkbox.js","panel.js","radio.js","text-input.js","label.js","range-slider.js","progress-bar.js","component-label.js","component-editable-text.js","canvas-components.js"],"names":["CanvasComponentsUtil","debug","IsUndefinedNullOrEmpty","variable","IsComponent","possiblyComponent","UUID","s4","Math","floor","random","toString","substring","Log","str","console","log","Timestamp","window","performance","now","Date","getTime","Collides","rect","x","y","left","right","w","top","bottom","h","CCUtil","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","CanvasComponentCollection","this","collection","orderedCollection","value","component","push","sort","componentA","componentB","options","z","id","splice","_addOrderedComponent","concat","Destroy","_removeOrderedComponent","values","map","BB","_getBoundingBox","filter","BBObject","componentType","ComponentType","CanvasComponent","BUTTON","CHECKBOX","PANEL","RADIO","TEXT_INPUT","LABEL","RANGE_SLIDER","PROGRESS_BAR","COMPONENT_LABEL","COMPONENT_EDITABLE_TEXT","ComponentEvent","CLICK","DOUBLE_CLICK","MOUSE_DOWN","MOUSE_UP","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_OVER","MOUSE_OUT","MOUSE_MOVE","SCROLL","Component","ctx","canvas","error","isMetaComponent","hasFocus","isMouseOver","isDragged","relativeMouseX","relativeMouseY","mouseEvents","eventType","callback","indexOf","bind","e","radius","textAlign","textBaseline","font","fontSize","fontFamily","measureText","textContent","width","height","strokeStyle","fillStyle","lineWidth","bb","beginPath","closePath","stroke","dt","mouseState","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","CCButton","_Component","_this","assign","borderWidth","borderColor","backgroundColor","padding","margin","gradient","createLinearGradient","addColorStop","_componentLabel","ComponentLabel","SetText","GetText","Update","fill","Draw","document","body","style","cursor","CCCheckbox","fontColor","checkColor","group","state","checkWidth","checkHeight","SwitchState","CCPanel","componentCollection","AddComponent","RemoveComponent","save","clip","restore","CCRadioButton","arc","PI","CCTextInput","_componentText","ComponentEditableText","SetValue","GetValue","CCLabel","fillText","CCRangeSlider","CCProgressBar","parentComponent","parentOptions","ComponentCanvas","canvasselector","stats","querySelector","getContext","canvasWidth","canvasHeight","t","acc","last","step","time","ft","addEventListener","e_onClick","e_onDblClick","e_mouseDown","e_mouseUp","e_mouseEnter","e_mouseLeave","e_mouseOver","e_mouseOut","e_mouseMove","e_mouseScroll","lx","ly","dx","dy","ldx","ldy","isDown","downStartTime","downElapsedTime","dragEventFired","componentsDragged","Loop","addToCollection","arguments","undefined","begin","end","requestAnimationFrame","clearRect","GetComponentsAtPoint","forEach","components","clientX","clientY","GetComponents","GetComponentsOfType","radio","GetGroup","SetState","_mouseEvent","FindComponent","FindComponentById"],"mappings":"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","file":"canvas-components.min.js","sourcesContent":["// \"Static\" Canvas Component Utility Class\r\nvar CanvasComponentsUtil = \r\n{ \r\n\tdebug: true\r\n};\r\n\r\nCanvasComponentsUtil.IsUndefinedNullOrEmpty = function(variable)\r\n{\r\n\tif(typeof variable === 'undefined' ||\r\n\t\tvariable === null ||\r\n\t\tvariable === '')\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nCanvasComponentsUtil.IsComponent = function(possiblyComponent)\r\n{\r\n\t// Fails after transplying\r\n\t//return Object.getPrototypeOf(possiblyComponent.constructor).name === 'Component';\r\n\treturn true;\r\n}\r\n\r\n// Component unique id generator method\r\nCanvasComponentsUtil.UUID = function()\r\n{\r\n\tfunction s4() \r\n\t{\r\n\t\treturn Math.floor((1 + Math.random()) * 0x10000)\r\n\t\t.toString(16)\r\n\t\t.substring(1);\r\n\t}\r\n\r\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n}\r\n\r\nCanvasComponentsUtil.Log = function(str)\r\n{\r\n\tif(CanvasComponentsUtil.debug)\r\n\t\tconsole.log(str);\r\n}\r\n\r\nCanvasComponentsUtil.Timestamp = function()\r\n{\r\n\treturn window.performance && window.performance.now ? window.performance.now() : new Date().getTime();\r\n}\r\n\r\n// Basic point-rectangle collision checking method\r\nCanvasComponentsUtil.Collides = function(rect, x, y) \r\n{\r\n\tvar left = rect.x;\r\n\tvar right = rect.x + rect.w;\r\n\tvar top = rect.y;\r\n\tvar bottom = rect.y + rect.h;\r\n\r\n\tif (right >= x && left <= x && bottom >= y && top <= y) \r\n\t\treturn true;\r\n\r\n\treturn false;\r\n}\r\n\r\nvar CCUtil = CanvasComponentsUtil;","// Collection class for Canvas Components\r\nclass CanvasComponentCollection\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tthis.collection = {};\r\n\t\tthis.orderedCollection = [];\r\n\t}\r\n\r\n\t_addOrderedComponent(component)\r\n\t{\r\n\t\tthis.orderedCollection.push(component);\r\n\r\n\t\tthis.orderedCollection.sort(function(componentA, componentB)\r\n\t\t{\r\n\t\t\tif(componentA.options.z < componentB.options.z)\r\n\t\t\t\treturn -1;\r\n\r\n\t\t\tif(componentA.options.z > componentB.options.z)\r\n\t\t\t\treturn 1;\r\n\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t}\r\n\r\n\t_removeOrderedComponent(component)\r\n\t{\r\n\t\tfor(var i = 0; i < this.orderedCollection.length; i++)\r\n\t\t{\r\n\t\t\tif(this.orderedCollection[i].id === component.id)\r\n\t\t\t\tthis.orderedCollection.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Add component to the collection\r\n\tAddComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Add: Component is null or given component is not a component`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(typeof this.collection[component.id] === 'undefined')\r\n\t\t{\r\n\t\t\tthis.collection[component.id] = component;\r\n\t\t\tthis._addOrderedComponent(component)\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Add: ComponentCollection already has a component with id '${component.id}'`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove component from the collection\r\n\tRemoveComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t\treturn false;\r\n\r\n\t\tif(typeof this.collection[component.id] !== 'undefined')\r\n\t\t{\r\n\t\t\tthis.collection[component.id].Destroy();\r\n\t\t\tdelete this.collection[component.id];\r\n\t\t\tthis._removeOrderedComponent(component);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Remove: Could not find a component with id '${component.id}'`);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Find component in the collection by component\r\n\tFindComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t\treturn false;\r\n\t\t\r\n\t\tif(typeof this.collection[component.id] !== 'undefined')\r\n\t\t{\r\n\t\t\treturn this.collection[component.id];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`FindComponent: Could not find a component with id '${component.id}'`);\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Find component in the collection by a component unique id\r\n\tFindComponentById(id)\r\n\t{\r\n\t\tif(!CCUtil.IsUndefinedNullOrEmpty(id))\r\n\t\t{\r\n\t\t\tif(typeof this.collection[id] !== 'undefined')\r\n\t\t\t{\r\n\t\t\t\treturn this.collection[id];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tCCUtil.Log(`FindComponentById: Could not find a component with id '${id}'`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Returns a bounding box and a component ref for every component in collection\r\n\tGetBoundingBoxes()\r\n\t{\r\n\t\treturn Object.values(this.collection).map(function(component)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponent: component,\r\n\t\t\t\tBB: component._getBoundingBox()\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\t// Returns all components whose bounding box collide with given x, y\r\n\tGetComponentsAtPoint(x, y)\r\n\t{\r\n\t\treturn Object.values(this.collection).map(function(component)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponent: component,\r\n\t\t\t\tBB: component._getBoundingBox()\r\n\t\t\t};\r\n\t\t}).filter(function(BBObject)\r\n\t\t{\r\n\t\t\treturn CCUtil.Collides(BBObject.BB, x, y);\r\n\t\t}).map(function(BBObject)\r\n\t\t{\r\n\t\t\treturn BBObject.component;\r\n\t\t});\r\n\t}\r\n\r\n\t// Returns all components\r\n\tGetComponents()\r\n\t{\r\n\t\treturn Object.values(this.collection);\r\n\t}\r\n\r\n\tGetComponentsOfType(componentType)\r\n\t{\r\n\t\treturn Object.values(this.collection).filter(component => component.ComponentType === componentType);\r\n\t}\r\n}\r\n\r\n","// Component enumeration for each available Canvas Component\r\nvar CanvasComponent = \r\n{\r\n\tBUTTON: 1,\r\n\tCHECKBOX: 2,\r\n\tPANEL: 3,\r\n\tRADIO: 4,\r\n\tTEXT_INPUT: 5,\r\n\tLABEL: 6,\r\n\r\n\tRANGE_SLIDER: 7,\r\n\tPROGRESS_BAR: 8,\r\n\r\n\r\n\tCOMPONENT_LABEL: 1000,\r\n\tCOMPONENT_EDITABLE_TEXT: 1001\r\n}","// \"Enum\" of supported Canvas Component events\r\nvar ComponentEvent =\r\n{\r\n\tCLICK: 'click',\r\n\tDOUBLE_CLICK: 'dblclick',\r\n\tMOUSE_DOWN: 'mousedown',\r\n\tMOUSE_UP: 'mouseup',\r\n\tMOUSE_ENTER: 'mouseenter',\r\n\tMOUSE_LEAVE: 'mouseleave',\r\n\tMOUSE_OVER: 'mouseover',\r\n\tMOUSE_OUT: 'mouseout',\r\n\tMOUSE_MOVE: 'mousemove',\r\n\tSCROLL: 'scroll'\r\n};","// Component superclass for all Canvas Components\r\nclass Component\r\n{\r\n\tconstructor(options, ctx, canvas, componentType)\r\n\t{\r\n\t\t// Generate unique id for the component\r\n\t\tthis.id = CCUtil.UUID();\r\n\r\n\t\t// Log error if canvas context is not given\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(ctx))\r\n\t\t\tconsole.error('Component: Canvas context is undefined or null!');\r\n\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.ComponentType = componentType || null;\r\n\t\tthis.options = options;\r\n\r\n\t\tif(this.ComponentType >= 1000)\r\n\t\t\tthis.isMetaComponent = true;\r\n\t\telse\r\n\t\t\tthis.isMetaComponent = false;\r\n\r\n\t\t// Events related attributes\r\n\t\tthis.hasFocus = false;\r\n\t\tthis.isMouseOver = false;\r\n\t\tthis.isDragged = false;\r\n\t\tthis.relativeMouseX = -99999;\r\n\t\tthis.relativeMouseY = -99999;\r\n\r\n\t\t// Custom events bound to the component\r\n\t\tthis.mouseEvents = { };\r\n\r\n\t\tCCUtil.Log(`Created component with type ${this.ComponentType}`);\r\n\t}\r\n\r\n\t// Used to bind custom events to components. Does not override default event behaviour by default.\r\n\ton(eventType, callback)\r\n\t{\r\n\t\tif(Object.values(ComponentEvent).indexOf(eventType) === -1)\r\n\t\t{\r\n\t\t\tconsole.error(`Unsupported event '${eventType}' for component`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.mouseEvents[eventType] = callback.bind(this);\r\n\t}\r\n\r\n\t// Used to unbind custom events to components.\r\n\toff(eventType, callback)\r\n\t{\r\n\t\tif(typeof this.mouseEvents[eventType] !== 'undefined')\r\n\t\t\tthis.mouseEvents[eventType] = null;\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.hasFocus = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tthis.isMouseOver = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tthis.isMouseOver = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(typeof this.mouseEvents[eventType] !== 'undefined' &&\r\n\t\t   typeof this.mouseEvents[eventType] !== null)\r\n\t\t{\r\n\t\t\tthis.mouseEvents[eventType](e);\r\n\t\t}\r\n\t}\r\n\r\n\t// Returns the 2D bounding box of the component\r\n\t_getBoundingBox()\r\n\t{\r\n\t\t// Radio button is circular, so calculate x, y, w, h from radius\r\n\t\tif(this.ComponentType === CanvasComponent.RADIO)\r\n\t\t{\r\n\t\t\tvar x = this.options.x - this.options.radius;\r\n\t\t\tvar y = this.options.y - this.options.radius;\r\n\t\t\tvar w = this.options.radius * 2;\r\n\t\t\tvar h = this.options.radius * 2;\r\n\t\t}\r\n\t\telse if(this.ComponentType === CanvasComponent.LABEL)\r\n\t\t{\r\n\t\t\t// WARNING: HUGE HACK (Canvas text bounding box not easy, this gives decent estimate)\r\n\t\t\t// https://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\r\n\t\t\t// https://stackoverflow.com/questions/14836350/how-to-get-the-bounding-box-of-a-text-using-html5-canvas\r\n\t\t\t// https://galactic.ink/journal/2011/01/html5-typographic-metrics/#bboxUnicode\r\n\t\t\tthis.ctx.textAlign = \"start\";\r\n\t\t\tthis.ctx.textBaseline = \"alphabetic\";\r\n\t\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\t\tvar w = this.ctx.measureText(this.textContent).width;\r\n\t\t\tvar h = this.ctx.measureText('M').width;\r\n\t\t\tvar x = this.options.x;\r\n\t\t\tvar y = this.options.y - h;\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar x = this.options.x;\r\n\t\t\tvar y = this.options.y;\r\n\t\t\tvar w = this.options.width;\r\n\t\t\tvar h = this.options.height;\r\n\t\t}\r\n\r\n\t\treturn { x: x, y: y, w: w, h: h };\r\n\t}\r\n\r\n\t// Debug method. Draws a magenta bounding box border around a component when it has focus\r\n\t_drawFocus()\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Component draw function\r\n\tDraw()\r\n\t{\r\n\t\tif(this.hasFocus)\r\n\t\t{\r\n\t\t\tthis.ctx.strokeStyle = 'magenta';\r\n\t\t\tthis.ctx.fillStyle = 'magenta';\r\n\t\t\tthis.ctx.lineWidth = 2;\r\n\r\n\t\t\tvar bb = this._getBoundingBox();\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tthis.ctx.rect(\r\n\t\t\t\tbb.x - 3, \r\n\t\t\t\tbb.y - 3, \r\n\t\t\t\tbb.w + 6, \r\n\t\t\t\tbb.h + 6\r\n\t\t\t);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\t}\r\n\r\n\t// Component update function\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tif(this.isDragged)\r\n\t\t{\r\n\t\t\tthis.options.x = mouseState.x - this.relativeMouseX;\r\n\t\t\tthis.options.y = mouseState.y - this.relativeMouseY;\r\n\t\t}\r\n\t}\r\n\r\n\t// Component destroy method\r\n\tDestroy()\r\n\t{\r\n\t\t\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentButton (CCButton)\r\n\tDESC: Button component\r\n*/\r\nclass CCButton extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 90, \r\n\t\t\theight: 28,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 1,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tbackgroundColor: null,\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.BUTTON);\r\n\r\n\t\t// Default gradient shading\r\n\t\tif(this.options.backgroundColor === null)\r\n\t\t{\r\n\t\t\tvar gradient = this.ctx.createLinearGradient(\r\n\t\t\t\tthis.options.x + (this.options.width / 2), \r\n\t\t\t\tthis.options.y,\r\n\t\t\t\tthis.options.x + (this.options.width / 2),\r\n\t\t\t\tthis.options.y + this.options.height\r\n\t\t\t);\r\n\r\n\t\t\tgradient.addColorStop(0, 'rgb(244, 244, 244)');\r\n\t\t\tgradient.addColorStop(1, 'rgb(241, 241, 241');\r\n\r\n\t\t\tthis.options.backgroundColor = gradient;\r\n\t\t}\r\n\r\n\t\t// Instantiate the text of the button as a ComponentLabel\r\n\t\tthis._componentLabel = new ComponentLabel(\r\n\t\t{\r\n\t\t\tx: this.options.x + (this.options.width / 2),\r\n\t\t\ty: this.options.y + (this.options.height / 2)\r\n\t\t}, this.ctx);\r\n\t}\r\n\r\n\t// Set button text\r\n\tSetText(str)\r\n\t{\r\n\t\tthis._componentLabel.SetText(str);\r\n\t}\r\n\r\n\t// Get button text\r\n\tGetText()\r\n\t{\r\n\t\treturn this._componentLabel.GetText();\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tthis._componentLabel.Update(dt, mouseState, this.options);\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis._componentLabel.Draw();\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentCheckbox (CCCheckbox)\r\n\tDESC: Checkbox component\r\n*/\r\nclass CCCheckbox extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 15, \r\n\t\t\theight: 15,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\t\t\tcheckColor: '#000',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.CHECKBOX);\r\n\r\n\t\tthis.group = 0;\r\n\t\tthis.state = false;\r\n\t}\r\n\r\n\tSetGroup(group)\r\n\t{\r\n\t\tthis.group = group || null;\r\n\t}\r\n\r\n\tGetGroup()\r\n\t{\r\n\t\treturn this.group;\r\n\t}\r\n\r\n\tSetState(state)\r\n\t{\r\n\t\tthis.state = state || false;\r\n\t}\r\n\r\n\tSwitchState()\r\n\t{\r\n\t\tthis.state = !this.state;\r\n\t}\r\n\r\n\tGetState()\r\n\t{\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tif(this.state)\r\n\t\t{\r\n\t\t\tthis.ctx.fillStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.strokeStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tvar checkWidth = this.options.width / 2;\r\n\t\t\tvar checkHeight = this.options.height / 2;\r\n\r\n\t\t\tthis.ctx.rect(\r\n\t\t\t\tthis.options.x + checkWidth / 2, \r\n\t\t\t\tthis.options.y + checkHeight / 2, \r\n\t\t\t\tcheckWidth, \r\n\t\t\t\tcheckHeight\r\n\t\t\t);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.SwitchState();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentPanel (CCPanel)\r\n\tDESC: Panel component\r\n*/\r\nclass CCPanel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 300, \r\n\t\t\theight: 350,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: null,\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.PANEL);\r\n\r\n\t\t// Default gradient shading\r\n\t\tif(this.options.backgroundColor === null)\r\n\t\t{\r\n\t\t\tvar gradient = this.ctx.createLinearGradient(\r\n\t\t\t\tthis.options.x + (this.options.width / 2), \r\n\t\t\t\tthis.options.y,\r\n\t\t\t\tthis.options.x + (this.options.width / 2),\r\n\t\t\t\tthis.options.y + this.options.height\r\n\t\t\t);\r\n\r\n\t\t\tgradient.addColorStop(0, 'rgb(244, 244, 244)');\r\n\t\t\tgradient.addColorStop(1, 'rgb(241, 241, 241');\r\n\r\n\t\t\tthis.options.backgroundColor = gradient;\r\n\t\t}\r\n\r\n\t\tthis.componentCollection = new CanvasComponentCollection();\r\n\t}\r\n\r\n\tAttachComponent(component)\r\n\t{\r\n\t\tif(this.componentCollection.AddComponent(component))\r\n\t\t\treturn component;\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\tDetachComponent(component)\r\n\t{\r\n\t\treturn this.componentCollection.RemoveComponent(component);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\t// This might work later for overflow / scrolling\r\n\t\tthis.ctx.save();\r\n\t\tthis.ctx.clip();\r\n\r\n\t\tfor(var i = 0; i < this.componentCollection.orderedCollection.length; i++)\r\n\t\t{\r\n\t\t\tthis.componentCollection[i].Draw();\r\n\t\t}\r\n\r\n\t\tthis.ctx.restore();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentRadioButton (CCRadioButton)\r\n\tDESC: Radio button component\r\n*/\r\nclass CCRadioButton extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\t\t\tradius: 8,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\t\t\tcheckColor: '#000',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.RADIO);\r\n\r\n\t\tthis.group = 0;\r\n\t\tthis.state = false;\r\n\t}\r\n\r\n\tSetGroup(group)\r\n\t{\r\n\t\tthis.group = group || null;\r\n\t}\r\n\r\n\tGetGroup()\r\n\t{\r\n\t\treturn this.group;\r\n\t}\r\n\r\n\tSetState(state)\r\n\t{\r\n\t\tthis.state = state || false;\r\n\t}\r\n\r\n\tSwitchState()\r\n\t{\r\n\t\tthis.state = !this.state;\r\n\t}\r\n\r\n\tGetState()\r\n\t{\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.arc(this.options.x, this.options.y, this.options.radius, 0, 2 * Math.PI);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tif(this.state)\r\n\t\t{\r\n\t\t\tthis.ctx.fillStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.strokeStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tthis.ctx.arc(this.options.x, this.options.y, this.options.radius / 3, 0, 2 * Math.PI);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.SwitchState();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentTextInput (CCTextInput)\r\n\tDESC: Text input component\r\n*/\r\nclass CCTextInput extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 21,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 5\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.TEXT_INPUT);\r\n\r\n\t\tthis._componentText = new ComponentEditableText(\r\n\t\t{\r\n\t\t\tx: this.options.x,\r\n\t\t\ty: this.options.y + (this.options.height / 2)\r\n\t\t}, this.ctx);\r\n\t}\r\n\r\n\t// Set text input value\r\n\tSetValue(str)\r\n\t{\r\n\t\tthis._componentText.SetValue(str);\r\n\t}\r\n\r\n\t// Get text input value\r\n\tGetValue()\r\n\t{\r\n\t\treturn this._componentText.GetValue();\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tthis._componentText.Update(dt, mouseState, this.options);\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis._componentText.Draw(this.options);\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'text';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentLabel (CCLabel)\r\n\tDESC: Label component\r\n*/\r\nclass CCLabel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 35,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 16,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.LABEL);\r\n\r\n\t\tthis.textContent = '';\r\n\t}\r\n\r\n\tSetText(str)\r\n\t{\r\n\t\tthis.textContent = str;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"start\";\r\n\t\tthis.ctx.textBaseline = \"alphabetic\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.textContent, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentRangeSlider (CCRangeSlider)\r\n\tDESC: Range slider component\r\n*/\r\nclass CCRangeSlider extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 200, \r\n\t\t\theight: 50,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.RANGE_SLIDER);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentProgressBar (CCProgressBar)\r\n\tDESC: Progress bar component\r\n*/\r\nclass CCProgressBar extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 200, \r\n\t\t\theight: 50,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.PROGRESS_BAR);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: ComponentLabel\r\n\tDESC: Meta label component\r\n*/\r\nclass ComponentLabel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas, parentComponent)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial',\r\n\r\n\t\t\tpadding:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t},\r\n\r\n\t\t\tmargin:\r\n\t\t\t{\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.COMPONENT_LABEL);\r\n\r\n\t\t/*if(CCUtil.IsUndefinedNullOrEmpty(parentComponent))\r\n\t\t\tCCUtil.Log(`Parent component could not be inherited for ComponentLabel#${this.id}`);\r\n\r\n\t\tthis.parentComponent = parentComponent;*/\r\n\t\tthis.textContent = '';\r\n\t}\r\n\r\n\t// Set component label text\r\n\tSetText(str)\r\n\t{\r\n\t\tthis.textContent = str;\r\n\t}\r\n\r\n\t// Get component label text\r\n\tGetText()\r\n\t{\r\n\t\treturn this.textContent;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState, parentOptions)\r\n\t{\r\n\t\t//super.Update(dt, mouseState);\r\n\t\tthis.options.x = parentOptions.x + (parentOptions.width / 2),\r\n\t\tthis.options.y = parentOptions.y + (parentOptions.height / 2)\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"center\";\r\n\t\tthis.ctx.textBaseline = \"middle\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.textContent, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n}","/*\r\n\tCLASS: ComponentLabel\r\n\tDESC: Meta label component\r\n*/\r\nclass ComponentEditableText extends Component\r\n{\r\n\tconstructor(options, ctx, canvas, parentComponent)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.COMPONENT_EDITABLE_TEXT);\r\n\r\n\t\t/*if(CCUtil.IsUndefinedNullOrEmpty(parentComponent))\r\n\t\t\tCCUtil.Log(`Parent component could not be inherited for ComponentEditableText#${this.id}`);\r\n\r\n\t\tthis.parentComponent = parentComponent;*/\r\n\t\tthis.value = '';\r\n\t}\r\n\r\n\t// Set editable text value\r\n\tSetValue(str)\r\n\t{\r\n\t\tthis.value = str;\r\n\t}\r\n\r\n\t// Get editable text value\r\n\tGetValue()\r\n\t{\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState, parentOptions)\r\n\t{\r\n\t\t//super.Update(dt, mouseState);\r\n\t\tthis.options.x = parentOptions.x;\r\n\t\tthis.options.y = parentOptions.y + (parentOptions.height / 2);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw(parentOptions)\r\n\t{\r\n\t\tparentOptions = parentOptions || { padding: { left: 0 } };\r\n\r\n\t\tthis.ctx.textAlign = \"start\";\r\n\t\tthis.ctx.textBaseline = \"middle\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.value, this.options.x + parentOptions.padding.left, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n}","// Main class for Canvas Components\r\nclass ComponentCanvas\r\n{\r\n\tconstructor(canvasselector, stats)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(canvasselector))\r\n\t\t{\r\n\t\t\tconsole.error('ComponentCanvas: Invalid selector ' + canvasselector);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.canvasselector = canvasselector;\r\n\r\n\t\tif(document.querySelector(this.canvasselector) === null)\r\n\t\t{\r\n\t\t\tconsole.error('ComponentCanvas: Could not get canvas ' + this.canvasselector);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//Fps counter\r\n\t\tthis.stats = stats || null;\r\n\r\n\t\t// Canvas attributes\r\n\t\tthis.canvas = document.querySelector(this.canvasselector);\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t\tthis.canvasWidth = this.canvas.width;\r\n\t\tthis.canvasHeight = this.canvas.height;\r\n\r\n\t\t// Instantiate CanvasComponentCollection to hold the components in\r\n\t\tthis.CanvasComponentCollection = new CanvasComponentCollection();\r\n\r\n\t\t// Main update and draw loop timing setup\r\n\t\tthis.t = \r\n\t\t{\r\n\t\t\tnow: null,\r\n\t\t\tacc: 0,\r\n\t\t\tdt: 0.01,\r\n\t\t\tlast: 0,\r\n\t\t\tstep: 1/60,\r\n\t\t\ttime: 0,\r\n\t\t\tft: 0\r\n\t\t}\r\n\r\n\t\t// Bind all the native event listeners and screw them up later with cool custom things\r\n\t\tthis.canvas.addEventListener('click', this.e_onClick.bind(this));\r\n\t\tthis.canvas.addEventListener('dblclick', this.e_onDblClick.bind(this));\r\n\t\tthis.canvas.addEventListener('mousedown', this.e_mouseDown.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseup', this.e_mouseUp.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseenter', this.e_mouseEnter.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseleave', this.e_mouseLeave.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseover', this.e_mouseOver.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseout', this.e_mouseOut.bind(this));\r\n\t\tthis.canvas.addEventListener('mousemove', this.e_mouseMove.bind(this));\r\n\t\tthis.canvas.addEventListener('scroll', this.e_mouseScroll.bind(this));\r\n\r\n\t\t// Event related attributes\r\n\t\tthis.mouseState = \r\n\t\t{\r\n\t\t\tlx: -99999,\t\t// Mouse last x\r\n\t\t\tly: -99999,\t\t// Mouse last y\r\n\t\t\tx: -99999,\t\t// Mouse x\r\n\t\t\ty: -99999,\t\t// Mouse y\r\n\t\t\tdx: -99999,\t\t// Mouse delta x\r\n\t\t\tdy: -99999,\t\t// Mouse delta y\r\n\t\t\tldx: -99999,\t// Last down x\r\n\t\t\tldy: -99999,\t// Last down y\r\n\r\n\t\t\tisDown: false,\r\n\r\n\t\t\tdownStartTime: 0,\r\n\t\t\tdownElapsedTime: 0,\r\n\t\t\tdragEventFired: false\r\n\t\t};\r\n\r\n\t\tthis.componentsDragged = [];\r\n\r\n\t\t// Start main update and draw loop\r\n\t\tthis.Loop();\r\n\t}\r\n\r\n\t// Main component creation method\r\n\tCreateComponent(componentType, options, addToCollection = true)\r\n\t{\r\n\t\tvar component = null;\r\n\r\n\t\t// Meta component, skip\r\n\t\tif(componentType >= 1000)\r\n\t\t{\r\n\t\t\tCCUtil.Log(`CreateComponent: Trying to instantiate Meta Component, ignoring`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tswitch(componentType)\r\n\t\t{\r\n\t\t\tcase CanvasComponent.BUTTON:\r\n\t\t\t\tcomponent = new CCButton(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.CHECKBOX:\r\n\t\t\t\tcomponent = new CCCheckbox(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.PANEL:\r\n\t\t\t\tcomponent = new CCPanel(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.RADIO:\r\n\t\t\t\tcomponent = new CCRadioButton(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.TEXT_INPUT:\r\n\t\t\t\tcomponent = new CCTextInput(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.LABEL:\r\n\t\t\t\tcomponent = new CCLabel(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.RANGE_SLIDER:\r\n\t\t\t\tcomponent = new CCRangeSlider(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.PROGRESS_BAR:\r\n\t\t\t\tcomponent = new CCProgressBar(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tCCUtil.Log(`CreateComponent: Component creation failed (${componentType})`);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(addToCollection)\r\n\t\t{\r\n\t\t\t// Returns the component or false\r\n\t\t\treturn this.AddComponent(component);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn component;\r\n\t\t}\r\n\t}\r\n\r\n\t// Same as CreateComponent, but does not add it to any collection\r\n\tBuildComponent(componentType, options)\r\n\t{\r\n\t\treturn this.AddComponent(componentType, options, false);\r\n\t}\r\n\r\n\tGetContext()\r\n\t{\r\n\t\treturn this.ctx;\r\n\t}\r\n\r\n\t// Actually the main loop\r\n\tLoop()\r\n\t{\r\n\t\t// Begin fps measurement\r\n\t\tthis.stats.begin();\t\r\n\r\n\t\tthis.t.now = CCUtil.Timestamp();\r\n\t\tthis.t.ft = this.t.now - this.t.last;\r\n\r\n\t\tif(this.t.ft > 0.25)\r\n\t\t\tthis.t.ft = 0.25;\r\n\r\n\t\tthis.t.last = this.t.now; \r\n\t\tthis.t.acc += this.t.ft;\r\n\r\n\t\twhile(this.t.acc >= this.t.dt) \r\n\t\t{\r\n\t\t\tthis.Update(this.t.dt);\r\n\t\t\t\r\n\t\t\tthis.t.time += this.t.dt;\r\n\t\t\tthis.t.acc -= this.t.dt;\r\n\t\t}\r\n\r\n\t\tthis.Draw();\r\n\r\n\t\t// End fps measurement\r\n\t\tthis.stats.end();\r\n\r\n\t\trequestAnimationFrame(function() { this.Loop(); }.bind(this));\r\n\t}\r\n\r\n\t// Main component draw method and loop\r\n\tDraw()\r\n\t{\r\n\t\t// Clear the canvas, optimize later if enough brain\r\n\t\tthis.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n\t\t// Draw everything\r\n\t\tfor(var i = 0; i < this.CanvasComponentCollection.orderedCollection.length; i++)\r\n\t\t{\r\n\t\t\tthis.CanvasComponentCollection.orderedCollection[i].Draw();\r\n\t\t}\r\n\t}\r\n\r\n\t// Main component update method and loop\r\n\tUpdate(dt)\r\n\t{\r\n\t\tvar self = this;\r\n\r\n\t\tif(this.mouseState.isDown)\r\n\t\t{\r\n\t\t\tthis.mouseState.downElapsedTime = this.t.time - this.mouseState.downStartTime;\r\n\r\n\t\t\tif(this.mouseState.downElapsedTime > 5 && !this.mouseState.dragEventFired)\r\n\t\t\t{\r\n\t\t\t\tthis.mouseState.dragEventFired = true;\r\n\r\n\t\t\t\t// Get all components under mouse click coordinates\r\n\t\t\t\tthis.componentsDragged = this.GetComponentsAtPoint(this.mouseState.x, this.mouseState.y);\r\n\r\n\t\t\t\t// Set focus of every component to false\r\n\t\t\t\tthis.componentsDragged.forEach(function(component)\r\n\t\t\t\t{\r\n\t\t\t\t\tcomponent.isDragged = true;\r\n\t\t\t\t\tcomponent.relativeMouseX = self.mouseState.x - component.options.x;\r\n\t\t\t\t\tcomponent.relativeMouseY = self.mouseState.y - component.options.y;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var component in this.CanvasComponentCollection.collection)\r\n\t\t{\r\n\t\t\tif(!this.CanvasComponentCollection.collection.hasOwnProperty(component))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tthis.CanvasComponentCollection.collection[component].Update(dt, this.mouseState);\r\n\t\t}\r\n\t}\r\n\r\n\t// Click event handler\r\n\te_onClick(e)\r\n\t{\r\n\t\tvar self = this;\r\n\r\n\t\t// Get all components under mouse click coordinates\r\n\t\tvar components = this.GetComponentsAtPoint(e.clientX, e.clientY);\r\n\r\n\t\t// Set focus of every component to false\r\n\t\tthis.GetComponents().forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent.hasFocus = false;\r\n\t\t});\r\n\r\n\t\t// Call the click events of all components returned by GetComponentsAtPoint\r\n\t\tcomponents.forEach(function(component)\r\n\t\t{\r\n\t\t\tif(component.ComponentType === CanvasComponent.RADIO)\r\n\t\t\t{\r\n\t\t\t\tself.GetComponentsOfType(CanvasComponent.RADIO).forEach(function(radio)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(radio.GetGroup() === component.GetGroup())\r\n\t\t\t\t\t\tradio.SetState(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tcomponent._mouseEvent(ComponentEvent.CLICK, e);\r\n\t\t});\r\n\t}\r\n\r\n\t// Double click event handler\r\n\te_onDblClick(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse down event handler\r\n\te_mouseDown(e)\r\n\t{\r\n\t\tthis.mouseState.isDown = true;\r\n\t\tthis.mouseState.downStartTime = this.t.time;\r\n\t\tthis.mouseState.ldx = e.clientX;\r\n\t\tthis.mouseState.ldy = e.clientY;\r\n\t}\r\n\r\n\t// Mouse up event handler\r\n\te_mouseUp(e)\r\n\t{\r\n\t\tthis.mouseState.isDown = false;\r\n\t\tthis.mouseState.dragEventFired = false;\r\n\r\n\t\tthis.componentsDragged.forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent.isDragged = false;\r\n\t\t});\r\n\t}\r\n\r\n\t// Mouse enter event handler\r\n\te_mouseEnter(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse leave event handler\r\n\te_mouseLeave(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse over event handler\r\n\te_mouseOver(e)\r\n\t{\r\n\r\n\t}\r\n\r\n\t// Mouse out event handler\r\n\te_mouseOut(e)\r\n\t{\r\n\r\n\t}\r\n\r\n\t// Mouse move event handler\r\n\te_mouseMove(e)\r\n\t{\r\n\t\tthis.mouseState.lx = this.mouseState.x;\r\n\t\tthis.mouseState.ly = this.mouseState.y;\r\n\t\tthis.mouseState.x = e.clientX;\r\n\t\tthis.mouseState.y = e.clientY;\r\n\t\tthis.mouseState.dx = this.mouseState.x - this.mouseState.lx;\r\n\t\tthis.mouseState.dy = this.mouseState.y - this.mouseState.ly;\r\n\r\n\t\t// Should probably move this to Update loop\r\n\t\tthis.GetComponents().forEach(function(component)\r\n\t\t{\r\n\t\t\tif(CCUtil.Collides(component._getBoundingBox(), e.clientX, e.clientY))\r\n\t\t\t{\r\n\t\t\t\tif(!component.isMouseOver)\r\n\t\t\t\t\tcomponent._mouseEvent(ComponentEvent.MOUSE_OVER, e);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(component.isMouseOver)\r\n\t\t\t\t\tcomponent._mouseEvent(ComponentEvent.MOUSE_OUT, e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Mouse scroll event handler\r\n\te_mouseScroll(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Top level CanvasComponentCollection methods\r\n\r\n\t// Add component to the collection\r\n\tAddComponent(component)\r\n\t{\r\n\t\tif(this.CanvasComponentCollection.AddComponent(component))\r\n\t\t\treturn component;\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\t// Remove component from the collection\r\n\tRemoveComponent(component)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.RemoveComponent(component);\r\n\t}\r\n\r\n\t// Find component in the collection by component\r\n\tFindComponent(component)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.FindComponent(component);\r\n\t}\r\n\r\n\t// Find component in the collection by a component unique id\r\n\tFindComponentById(id)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.FindComponentById(id);\r\n\t}\r\n\r\n\t// Returns all components whose bounding box collide with given x, y\r\n\tGetComponentsAtPoint(x, y)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.GetComponentsAtPoint(x, y);\r\n\t}\r\n\r\n\t// Returns all components\r\n\tGetComponents()\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.GetComponents();\r\n\t}\r\n\r\n\tGetComponentsOfType(componentType)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.GetComponentsOfType(componentType);\r\n\t}\r\n}"]}