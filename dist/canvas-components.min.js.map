{"version":3,"sources":["canvas-components-util.js","canvas-components-collection.js","component-enum.js","component-events.js","component.js","button.js","checkbox.js","panel.js","radio.js","text-input.js","label.js","range-slider.js","progress-bar.js","component-label.js","component-editable-text.js","canvas-components.js"],"names":["CanvasComponentsUtil","debug","IsUndefinedNullOrEmpty","variable","IsComponent","possiblyComponent","UUID","s4","Math","floor","random","toString","substring","Log","str","console","log","Timestamp","window","performance","now","Date","getTime","Collides","rect","x","y","left","right","w","top","bottom","h","CCUtil","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","CanvasComponentCollection","this","collection","value","component","id","concat","Destroy","values","map","BB","_getBoundingBox","filter","BBObject","componentType","ComponentType","CanvasComponent","BUTTON","CHECKBOX","PANEL","RADIO","TEXT_INPUT","LABEL","RANGE_SLIDER","PROGRESS_BAR","COMPONENT_LABEL","COMPONENT_EDITABLE_TEXT","ComponentEvent","CLICK","DOUBLE_CLICK","MOUSE_DOWN","MOUSE_UP","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_OVER","MOUSE_OUT","MOUSE_MOVE","SCROLL","Component","options","ctx","canvas","error","isMetaComponent","hasFocus","isMouseOver","isDragged","relativeMouseX","relativeMouseY","mouseEvents","eventType","callback","indexOf","bind","e","radius","textAlign","textBaseline","font","fontSize","fontFamily","measureText","textContent","width","height","strokeStyle","fillStyle","lineWidth","bb","beginPath","closePath","stroke","dt","mouseState","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","CCButton","_Component","_this","assign","z","borderWidth","borderColor","backgroundColor","gradient","createLinearGradient","addColorStop","_componentLabel","ComponentLabel","SetText","GetText","Update","fill","Draw","document","body","style","cursor","CCCheckbox","fontColor","checkColor","group","state","checkWidth","checkHeight","SwitchState","CCPanel","CCRadioButton","arc","PI","CCTextInput","_componentText","ComponentEditableText","SetValue","GetValue","CCLabel","fillText","CCRangeSlider","CCProgressBar","parentComponent","parentOptions","ComponentCanvas","canvasselector","stats","querySelector","getContext","canvasWidth","canvasHeight","t","acc","last","step","time","ft","addEventListener","e_onClick","e_onDblClick","e_mouseDown","e_mouseUp","e_mouseEnter","e_mouseLeave","e_mouseOver","e_mouseOut","e_mouseMove","e_mouseScroll","lx","ly","dx","dy","ldx","ldy","isDown","downStartTime","downElapsedTime","dragEventFired","componentsDragged","Loop","AddComponent","RemoveComponent","FindComponent","FindComponentById","begin","end","requestAnimationFrame","clearRect","GetComponentsAtPoint","forEach","components","clientX","clientY","GetComponents","GetComponentsOfType","radio","GetGroup","SetState","_mouseEvent"],"mappings":"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","file":"canvas-components.min.js","sourcesContent":["// \"Static\" Canvas Component Utility Class\r\nvar CanvasComponentsUtil = \r\n{ \r\n\tdebug: true\r\n};\r\n\r\nCanvasComponentsUtil.IsUndefinedNullOrEmpty = function(variable)\r\n{\r\n\tif(typeof variable === 'undefined' ||\r\n\t\tvariable === null ||\r\n\t\tvariable === '')\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nCanvasComponentsUtil.IsComponent = function(possiblyComponent)\r\n{\r\n\t// Fails after transplying\r\n\t//return Object.getPrototypeOf(possiblyComponent.constructor).name === 'Component';\r\n\treturn true;\r\n}\r\n\r\n// Component unique id generator method\r\nCanvasComponentsUtil.UUID = function()\r\n{\r\n\tfunction s4() \r\n\t{\r\n\t\treturn Math.floor((1 + Math.random()) * 0x10000)\r\n\t\t.toString(16)\r\n\t\t.substring(1);\r\n\t}\r\n\r\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n}\r\n\r\nCanvasComponentsUtil.Log = function(str)\r\n{\r\n\tif(CanvasComponentsUtil.debug)\r\n\t\tconsole.log(str);\r\n}\r\n\r\nCanvasComponentsUtil.Timestamp = function()\r\n{\r\n\treturn window.performance && window.performance.now ? window.performance.now() : new Date().getTime();\r\n}\r\n\r\n// Basic point-rectangle collision checking method\r\nCanvasComponentsUtil.Collides = function(rect, x, y) \r\n{\r\n\tvar left = rect.x;\r\n\tvar right = rect.x + rect.w;\r\n\tvar top = rect.y;\r\n\tvar bottom = rect.y + rect.h;\r\n\r\n\tif (right >= x && left <= x && bottom >= y && top <= y) \r\n\t\treturn true;\r\n\r\n\treturn false;\r\n}\r\n\r\nvar CCUtil = CanvasComponentsUtil;","// Collection class for Canvas Components\r\nclass CanvasComponentCollection\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tthis.collection = {};\r\n\t}\r\n\t\r\n\t// Add component to the collection\r\n\tAddComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Add: Component is null or given component is not a component`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(typeof this.collection[component.id] === 'undefined')\r\n\t\t{\r\n\t\t\tthis.collection[component.id] = component;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Add: ComponentCollection already has a component with id '${component.id}'`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove component from the collection\r\n\tRemoveComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t\treturn false;\r\n\r\n\t\tif(typeof this.collection[component.id] !== 'undefined')\r\n\t\t{\r\n\t\t\tthis.collection[component.id].Destroy();\r\n\t\t\tdelete this.collection[component.id];\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`Remove: Could not find a component with id '${component.id}'`);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Find component in the collection by component\r\n\tFindComponent(component)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(component) || !CCUtil.IsComponent(component))\r\n\t\t\treturn false;\r\n\t\t\r\n\t\tif(typeof this.collection[component.id] !== 'undefined')\r\n\t\t{\r\n\t\t\treturn this.collection[component.id];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tCCUtil.Log(`FindComponent: Could not find a component with id '${component.id}'`);\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Find component in the collection by a component unique id\r\n\tFindComponentById(id)\r\n\t{\r\n\t\tif(!CCUtil.IsUndefinedNullOrEmpty(id))\r\n\t\t{\r\n\t\t\tif(typeof this.collection[id] !== 'undefined')\r\n\t\t\t{\r\n\t\t\t\treturn this.collection[id];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tCCUtil.Log(`FindComponentById: Could not find a component with id '${id}'`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Returns a bounding box and a component ref for every component in collection\r\n\tGetBoundingBoxes()\r\n\t{\r\n\t\treturn Object.values(this.collection).map(function(component)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponent: component,\r\n\t\t\t\tBB: component._getBoundingBox()\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\t// Returns all components whose bounding box collide with given x, y\r\n\tGetComponentsAtPoint(x, y)\r\n\t{\r\n\t\treturn Object.values(this.collection).map(function(component)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tcomponent: component,\r\n\t\t\t\tBB: component._getBoundingBox()\r\n\t\t\t};\r\n\t\t}).filter(function(BBObject)\r\n\t\t{\r\n\t\t\treturn CCUtil.Collides(BBObject.BB, x, y);\r\n\t\t}).map(function(BBObject)\r\n\t\t{\r\n\t\t\treturn BBObject.component;\r\n\t\t});\r\n\t}\r\n\r\n\t// Returns all components\r\n\tGetComponents()\r\n\t{\r\n\t\treturn Object.values(this.collection);\r\n\t}\r\n\r\n\tGetComponentsOfType(componentType)\r\n\t{\r\n\t\treturn Object.values(this.collection).filter(component => component.ComponentType === componentType);\r\n\t}\r\n}\r\n\r\n","// Component enumeration for each available Canvas Component\r\nvar CanvasComponent = \r\n{\r\n\tBUTTON: 1,\r\n\tCHECKBOX: 2,\r\n\tPANEL: 3,\r\n\tRADIO: 4,\r\n\tTEXT_INPUT: 5,\r\n\tLABEL: 6,\r\n\r\n\tRANGE_SLIDER: 7,\r\n\tPROGRESS_BAR: 8,\r\n\r\n\r\n\tCOMPONENT_LABEL: 1000,\r\n\tCOMPONENT_EDITABLE_TEXT: 1001\r\n}","// \"Enum\" of supported Canvas Component events\r\nvar ComponentEvent =\r\n{\r\n\tCLICK: 'click',\r\n\tDOUBLE_CLICK: 'dblclick',\r\n\tMOUSE_DOWN: 'mousedown',\r\n\tMOUSE_UP: 'mouseup',\r\n\tMOUSE_ENTER: 'mouseenter',\r\n\tMOUSE_LEAVE: 'mouseleave',\r\n\tMOUSE_OVER: 'mouseover',\r\n\tMOUSE_OUT: 'mouseout',\r\n\tMOUSE_MOVE: 'mousemove',\r\n\tSCROLL: 'scroll'\r\n};","// Component superclass for all Canvas Components\r\nclass Component\r\n{\r\n\tconstructor(options, ctx, canvas, componentType)\r\n\t{\r\n\t\t// Generate unique id for the component\r\n\t\tthis.id = CCUtil.UUID();\r\n\r\n\t\t// Log error if canvas context is not given\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(ctx))\r\n\t\t\tconsole.error('Component: Canvas context is undefined or null!');\r\n\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.ComponentType = componentType || null;\r\n\t\tthis.options = options;\r\n\r\n\t\tif(this.ComponentType >= 1000)\r\n\t\t\tthis.isMetaComponent = true;\r\n\t\telse\r\n\t\t\tthis.isMetaComponent = false;\r\n\r\n\t\t// Events related attributes\r\n\t\tthis.hasFocus = false;\r\n\t\tthis.isMouseOver = false;\r\n\t\tthis.isDragged = false;\r\n\t\tthis.relativeMouseX = -99999;\r\n\t\tthis.relativeMouseY = -99999;\r\n\r\n\t\t// Custom events bound to the component\r\n\t\tthis.mouseEvents = { };\r\n\r\n\t\tCCUtil.Log(`Created component with type ${this.ComponentType}`);\r\n\t}\r\n\r\n\t// Used to bind custom events to components. Does not override default event behaviour by default.\r\n\ton(eventType, callback)\r\n\t{\r\n\t\tif(Object.values(ComponentEvent).indexOf(eventType) === -1)\r\n\t\t{\r\n\t\t\tconsole.error(`Unsupported event '${eventType}' for component`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.mouseEvents[eventType] = callback.bind(this);\r\n\t}\r\n\r\n\t// Used to unbind custom events to components.\r\n\toff(eventType, callback)\r\n\t{\r\n\t\tif(typeof this.mouseEvents[eventType] !== 'undefined')\r\n\t\t\tthis.mouseEvents[eventType] = null;\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.hasFocus = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tthis.isMouseOver = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tthis.isMouseOver = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(typeof this.mouseEvents[eventType] !== 'undefined' &&\r\n\t\t   typeof this.mouseEvents[eventType] !== null)\r\n\t\t{\r\n\t\t\tthis.mouseEvents[eventType](e);\r\n\t\t}\r\n\t}\r\n\r\n\t// Returns the 2D bounding box of the component\r\n\t_getBoundingBox()\r\n\t{\r\n\t\t// Radio button is circular, so calculate x, y, w, h from radius\r\n\t\tif(this.ComponentType === CanvasComponent.RADIO)\r\n\t\t{\r\n\t\t\tvar x = this.options.x - this.options.radius;\r\n\t\t\tvar y = this.options.y - this.options.radius;\r\n\t\t\tvar w = this.options.radius * 2;\r\n\t\t\tvar h = this.options.radius * 2;\r\n\t\t}\r\n\t\telse if(this.ComponentType === CanvasComponent.LABEL)\r\n\t\t{\r\n\t\t\t// WARNING: HUGE HACK (Canvas text bounding box not easy, this gives decent estimate)\r\n\t\t\t// https://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\r\n\t\t\t// https://stackoverflow.com/questions/14836350/how-to-get-the-bounding-box-of-a-text-using-html5-canvas\r\n\t\t\t// https://galactic.ink/journal/2011/01/html5-typographic-metrics/#bboxUnicode\r\n\t\t\tthis.ctx.textAlign = \"start\";\r\n\t\t\tthis.ctx.textBaseline = \"alphabetic\";\r\n\t\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\t\tvar w = this.ctx.measureText(this.textContent).width;\r\n\t\t\tvar h = this.ctx.measureText('M').width;\r\n\t\t\tvar x = this.options.x;\r\n\t\t\tvar y = this.options.y - h;\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar x = this.options.x;\r\n\t\t\tvar y = this.options.y;\r\n\t\t\tvar w = this.options.width;\r\n\t\t\tvar h = this.options.height;\r\n\t\t}\r\n\r\n\t\treturn { x: x, y: y, w: w, h: h };\r\n\t}\r\n\r\n\t// Debug method. Draws a magenta bounding box border around a component when it has focus\r\n\t_drawFocus()\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Component draw function\r\n\tDraw()\r\n\t{\r\n\t\tif(this.hasFocus)\r\n\t\t{\r\n\t\t\tthis.ctx.strokeStyle = 'magenta';\r\n\t\t\tthis.ctx.fillStyle = 'magenta';\r\n\t\t\tthis.ctx.lineWidth = 2;\r\n\r\n\t\t\tvar bb = this._getBoundingBox();\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tthis.ctx.rect(\r\n\t\t\t\tbb.x - 3, \r\n\t\t\t\tbb.y - 3, \r\n\t\t\t\tbb.w + 6, \r\n\t\t\t\tbb.h + 6\r\n\t\t\t);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\t}\r\n\r\n\t// Component update function\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tif(this.isDragged)\r\n\t\t{\r\n\t\t\tthis.options.x = mouseState.x - this.relativeMouseX;\r\n\t\t\tthis.options.y = mouseState.y - this.relativeMouseY;\r\n\t\t}\r\n\t}\r\n\r\n\t// Component destroy method\r\n\tDestroy()\r\n\t{\r\n\t\t\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentButton (CCButton)\r\n\tDESC: Button component\r\n*/\r\nclass CCButton extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 90, \r\n\t\t\theight: 28,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tbackgroundColor: null\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.BUTTON);\r\n\r\n\t\t// Default gradient shading\r\n\t\tif(this.options.backgroundColor === null)\r\n\t\t{\r\n\t\t\tvar gradient = this.ctx.createLinearGradient(\r\n\t\t\t\tthis.options.x + (this.options.width / 2), \r\n\t\t\t\tthis.options.y,\r\n\t\t\t\tthis.options.x + (this.options.width / 2),\r\n\t\t\t\tthis.options.y + this.options.height\r\n\t\t\t);\r\n\r\n\t\t\tgradient.addColorStop(0, 'rgb(244, 244, 244)');\r\n\t\t\tgradient.addColorStop(1, 'rgb(241, 241, 241');\r\n\r\n\t\t\tthis.options.backgroundColor = gradient;\r\n\t\t}\r\n\r\n\t\t// Instantiate the text of the button as a ComponentLabel\r\n\t\tthis._componentLabel = new ComponentLabel(\r\n\t\t{\r\n\t\t\tx: this.options.x + (this.options.width / 2),\r\n\t\t\ty: this.options.y + (this.options.height / 2)\r\n\t\t}, this.ctx);\r\n\t}\r\n\r\n\t// Set button text\r\n\tSetText(str)\r\n\t{\r\n\t\tthis._componentLabel.SetText(str);\r\n\t}\r\n\r\n\t// Get button text\r\n\tGetText()\r\n\t{\r\n\t\treturn this._componentLabel.GetText();\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tthis._componentLabel.Update(dt, mouseState, this.options);\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis._componentLabel.Draw();\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentCheckbox (CCCheckbox)\r\n\tDESC: Checkbox component\r\n*/\r\nclass CCCheckbox extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 15, \r\n\t\t\theight: 15,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\t\t\tcheckColor: '#000'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.CHECKBOX);\r\n\r\n\t\tthis.group = 0;\r\n\t\tthis.state = false;\r\n\t}\r\n\r\n\tSetGroup(group)\r\n\t{\r\n\t\tthis.group = group || null;\r\n\t}\r\n\r\n\tGetGroup()\r\n\t{\r\n\t\treturn this.group;\r\n\t}\r\n\r\n\tSetState(state)\r\n\t{\r\n\t\tthis.state = state || false;\r\n\t}\r\n\r\n\tSwitchState()\r\n\t{\r\n\t\tthis.state = !this.state;\r\n\t}\r\n\r\n\tGetState()\r\n\t{\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tif(this.state)\r\n\t\t{\r\n\t\t\tthis.ctx.fillStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.strokeStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tvar checkWidth = this.options.width / 2;\r\n\t\t\tvar checkHeight = this.options.height / 2;\r\n\r\n\t\t\tthis.ctx.rect(\r\n\t\t\t\tthis.options.x + checkWidth / 2, \r\n\t\t\t\tthis.options.y + checkHeight / 2, \r\n\t\t\t\tcheckWidth, \r\n\t\t\t\tcheckHeight\r\n\t\t\t);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.SwitchState();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentPanel (CCPanel)\r\n\tDESC: Panel component\r\n*/\r\nclass CCPanel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 150,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: null\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.PANEL);\r\n\r\n\t\t// Default gradient shading\r\n\t\tif(this.options.backgroundColor === null)\r\n\t\t{\r\n\t\t\tvar gradient = this.ctx.createLinearGradient(\r\n\t\t\t\tthis.options.x + (this.options.width / 2), \r\n\t\t\t\tthis.options.y,\r\n\t\t\t\tthis.options.x + (this.options.width / 2),\r\n\t\t\t\tthis.options.y + this.options.height\r\n\t\t\t);\r\n\r\n\t\t\tgradient.addColorStop(0, 'rgb(244, 244, 244)');\r\n\t\t\tgradient.addColorStop(1, 'rgb(241, 241, 241');\r\n\r\n\t\t\tthis.options.backgroundColor = gradient;\r\n\t\t}\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\t//this.ctx.clip();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentRadioButton (CCRadioButton)\r\n\tDESC: Radio button component\r\n*/\r\nclass CCRadioButton extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\t\t\tradius: 8,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF',\r\n\t\t\tcheckColor: '#000'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.RADIO);\r\n\r\n\t\tthis.group = 0;\r\n\t\tthis.state = false;\r\n\t}\r\n\r\n\tSetGroup(group)\r\n\t{\r\n\t\tthis.group = group || null;\r\n\t}\r\n\r\n\tGetGroup()\r\n\t{\r\n\t\treturn this.group;\r\n\t}\r\n\r\n\tSetState(state)\r\n\t{\r\n\t\tthis.state = state || false;\r\n\t}\r\n\r\n\tSwitchState()\r\n\t{\r\n\t\tthis.state = !this.state;\r\n\t}\r\n\r\n\tGetState()\r\n\t{\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.arc(this.options.x, this.options.y, this.options.radius, 0, 2 * Math.PI);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tif(this.state)\r\n\t\t{\r\n\t\t\tthis.ctx.fillStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.strokeStyle = this.options.checkColor;\r\n\t\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\t\tthis.ctx.beginPath();\r\n\r\n\t\t\tthis.ctx.arc(this.options.x, this.options.y, this.options.radius / 3, 0, 2 * Math.PI);\r\n\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.CLICK:\r\n\t\t\t\tthis.SwitchState();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentTextInput (CCTextInput)\r\n\tDESC: Text input component\r\n*/\r\nclass CCTextInput extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 21,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.TEXT_INPUT);\r\n\r\n\t\tthis._componentText = new ComponentEditableText(\r\n\t\t{\r\n\t\t\tx: this.options.x,\r\n\t\t\ty: this.options.y + (this.options.height / 2)\r\n\t\t}, this.ctx);\r\n\t}\r\n\r\n\t// Set text input value\r\n\tSetValue(str)\r\n\t{\r\n\t\tthis._componentText.SetValue(str);\r\n\t}\r\n\r\n\t// Get text input value\r\n\tGetValue()\r\n\t{\r\n\t\treturn this._componentText.GetValue();\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tthis._componentText.Update(dt, mouseState, this.options);\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.fillStyle = this.options.backgroundColor;\r\n\t\tthis.ctx.strokeStyle = this.options.borderColor;\r\n\t\tthis.ctx.lineWidth = this.options.borderWidth;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\r\n\t\tthis.ctx.rect(\r\n\t\t\tthis.options.x, \r\n\t\t\tthis.options.y, \r\n\t\t\tthis.options.width, \r\n\t\t\tthis.options.height\r\n\t\t);\r\n\r\n\t\tthis.ctx.closePath();\r\n\t\tthis.ctx.fill();\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis._componentText.Draw();\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tswitch(eventType)\r\n\t\t{\r\n\t\t\tcase ComponentEvent.MOUSE_OVER:\r\n\t\t\t\tdocument.body.style.cursor = 'text';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ComponentEvent.MOUSE_OUT:\r\n\t\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentLabel (CCLabel)\r\n\tDESC: Label component\r\n*/\r\nclass CCLabel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 150, \r\n\t\t\theight: 35,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 16,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.LABEL);\r\n\r\n\t\tthis.textContent = '';\r\n\t}\r\n\r\n\tSetText(str)\r\n\t{\r\n\t\tthis.textContent = str;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"start\";\r\n\t\tthis.ctx.textBaseline = \"alphabetic\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.textContent, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentRangeSlider (CCRangeSlider)\r\n\tDESC: Range slider component\r\n*/\r\nclass CCRangeSlider extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 200, \r\n\t\t\theight: 50,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.RANGE_SLIDER);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: CanvasComponentProgressBar (CCProgressBar)\r\n\tDESC: Progress bar component\r\n*/\r\nclass CCProgressBar extends Component\r\n{\r\n\tconstructor(options, ctx, canvas)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\twidth: 200, \r\n\t\t\theight: 50,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tborderWidth: 1,\r\n\t\t\tborderColor: '#000',\r\n\r\n\t\t\tfontSize: 8,\r\n\t\t\tfontColor: '#000',\r\n\r\n\t\t\tbackgroundColor: '#FFF'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.PROGRESS_BAR);\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState)\r\n\t{\r\n\t\tsuper.Update(dt, mouseState);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tsuper.Draw();\r\n\t}\r\n\r\n\t// Default component event logic\r\n\t_mouseEvent(eventType, e)\r\n\t{\r\n\t\tsuper._mouseEvent(eventType, e);\r\n\t}\r\n}","/*\r\n\tCLASS: ComponentLabel\r\n\tDESC: Meta label component\r\n*/\r\nclass ComponentLabel extends Component\r\n{\r\n\tconstructor(options, ctx, canvas, parentComponent)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.COMPONENT_LABEL);\r\n\r\n\t\t/*if(CCUtil.IsUndefinedNullOrEmpty(parentComponent))\r\n\t\t\tCCUtil.Log(`Parent component could not be inherited for ComponentLabel#${this.id}`);\r\n\r\n\t\tthis.parentComponent = parentComponent;*/\r\n\t\tthis.textContent = '';\r\n\t}\r\n\r\n\t// Set component label text\r\n\tSetText(str)\r\n\t{\r\n\t\tthis.textContent = str;\r\n\t}\r\n\r\n\t// Get component label text\r\n\tGetText()\r\n\t{\r\n\t\treturn this.textContent;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState, parentOptions)\r\n\t{\r\n\t\t//super.Update(dt, mouseState);\r\n\t\tthis.options.x = parentOptions.x + (parentOptions.width / 2),\r\n\t\tthis.options.y = parentOptions.y + (parentOptions.height / 2)\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"center\";\r\n\t\tthis.ctx.textBaseline = \"middle\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.textContent, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n}","/*\r\n\tCLASS: ComponentLabel\r\n\tDESC: Meta label component\r\n*/\r\nclass ComponentEditableText extends Component\r\n{\r\n\tconstructor(options, ctx, canvas, parentComponent)\r\n\t{\r\n\t\toptions = Object.assign(\r\n\t\t{ \r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontColor: '#000',\r\n\t\t\tfontFamily: 'Arial'\r\n\t\t}, options);\r\n\r\n\t\tsuper(options, ctx, canvas, CanvasComponent.COMPONENT_EDITABLE_TEXT);\r\n\r\n\t\t/*if(CCUtil.IsUndefinedNullOrEmpty(parentComponent))\r\n\t\t\tCCUtil.Log(`Parent component could not be inherited for ComponentEditableText#${this.id}`);\r\n\r\n\t\tthis.parentComponent = parentComponent;*/\r\n\t\tthis.value = '';\r\n\t}\r\n\r\n\t// Set editable text value\r\n\tSetValue(str)\r\n\t{\r\n\t\tthis.value = str;\r\n\t}\r\n\r\n\t// Get editable text value\r\n\tGetValue()\r\n\t{\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\t// Component update method\r\n\tUpdate(dt, mouseState, parentOptions)\r\n\t{\r\n\t\t//super.Update(dt, mouseState);\r\n\t\tthis.options.x = parentOptions.x;\r\n\t\tthis.options.y = parentOptions.y + (parentOptions.height / 2);\r\n\t}\r\n\r\n\t// Component draw method\r\n\tDraw()\r\n\t{\r\n\t\tthis.ctx.textAlign = \"start\";\r\n\t\tthis.ctx.textBaseline = \"middle\";\r\n\t\tthis.ctx.fillStyle = this.options.fontColor;\r\n\t\tthis.ctx.strokeStyle = this.options.fontColor;\r\n\t\tthis.ctx.font = `${this.options.fontSize}px ${this.options.fontFamily}`;\r\n\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.fillText(this.value, this.options.x, this.options.y);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tsuper.Draw();\r\n\t}\r\n}","// Main class for Canvas Components\r\nclass ComponentCanvas\r\n{\r\n\tconstructor(canvasselector, stats)\r\n\t{\r\n\t\tif(CCUtil.IsUndefinedNullOrEmpty(canvasselector))\r\n\t\t{\r\n\t\t\tconsole.error('ComponentCanvas: Invalid selector ' + canvasselector);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.canvasselector = canvasselector;\r\n\r\n\t\tif(document.querySelector(this.canvasselector) === null)\r\n\t\t{\r\n\t\t\tconsole.error('ComponentCanvas: Could not get canvas ' + this.canvasselector);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//Fps counter\r\n\t\tthis.stats = stats || null;\r\n\r\n\t\t// Canvas attributes\r\n\t\tthis.canvas = document.querySelector(this.canvasselector);\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t\tthis.canvasWidth = this.canvas.width;\r\n\t\tthis.canvasHeight = this.canvas.height;\r\n\r\n\t\t// Instantiate CanvasComponentCollection to hold the components in\r\n\t\tthis.CanvasComponentCollection = new CanvasComponentCollection();\r\n\r\n\t\t// Main update and draw loop timing setup\r\n\t\tthis.t = \r\n\t\t{\r\n\t\t\tnow: null,\r\n\t\t\tacc: 0,\r\n\t\t\tdt: 0.01,\r\n\t\t\tlast: 0,\r\n\t\t\tstep: 1/60,\r\n\t\t\ttime: 0,\r\n\t\t\tft: 0\r\n\t\t}\r\n\r\n\t\t// Bind all the native event listeners and screw them up later with cool custom things\r\n\t\tthis.canvas.addEventListener('click', this.e_onClick.bind(this));\r\n\t\tthis.canvas.addEventListener('dblclick', this.e_onDblClick.bind(this));\r\n\t\tthis.canvas.addEventListener('mousedown', this.e_mouseDown.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseup', this.e_mouseUp.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseenter', this.e_mouseEnter.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseleave', this.e_mouseLeave.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseover', this.e_mouseOver.bind(this));\r\n\t\tthis.canvas.addEventListener('mouseout', this.e_mouseOut.bind(this));\r\n\t\tthis.canvas.addEventListener('mousemove', this.e_mouseMove.bind(this));\r\n\t\tthis.canvas.addEventListener('scroll', this.e_mouseScroll.bind(this));\r\n\r\n\t\t// Event related attributes\r\n\t\tthis.mouseState = \r\n\t\t{\r\n\t\t\tlx: -99999,\t\t// Mouse last x\r\n\t\t\tly: -99999,\t\t// Mouse last y\r\n\t\t\tx: -99999,\t\t// Mouse x\r\n\t\t\ty: -99999,\t\t// Mouse y\r\n\t\t\tdx: -99999,\t\t// Mouse delta x\r\n\t\t\tdy: -99999,\t\t// Mouse delta y\r\n\t\t\tldx: -99999,\t// Last down x\r\n\t\t\tldy: -99999,\t// Last down y\r\n\r\n\t\t\tisDown: false,\r\n\r\n\t\t\tdownStartTime: 0,\r\n\t\t\tdownElapsedTime: 0,\r\n\t\t\tdragEventFired: false\r\n\t\t};\r\n\r\n\t\tthis.componentsDragged = [];\r\n\r\n\t\t// Start main update and draw loop\r\n\t\tthis.Loop();\r\n\t}\r\n\r\n\t// Main component creation method\r\n\tCreateComponent(componentType, options)\r\n\t{\r\n\t\tvar component = null;\r\n\r\n\t\t// Meta component, skip\r\n\t\tif(componentType >= 1000)\r\n\t\t{\r\n\t\t\tCCUtil.Log(`CreateComponent: Trying to instantiate Meta Component, ignoring`);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tswitch(componentType)\r\n\t\t{\r\n\t\t\tcase CanvasComponent.BUTTON:\r\n\t\t\t\tcomponent = new CCButton(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.CHECKBOX:\r\n\t\t\t\tcomponent = new CCCheckbox(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.PANEL:\r\n\t\t\t\tcomponent = new CCPanel(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.RADIO:\r\n\t\t\t\tcomponent = new CCRadioButton(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.TEXT_INPUT:\r\n\t\t\t\tcomponent = new CCTextInput(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.LABEL:\r\n\t\t\t\tcomponent = new CCLabel(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.RANGE_SLIDER:\r\n\t\t\t\tcomponent = new CCRangeSlider(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CanvasComponent.PROGRESS_BAR:\r\n\t\t\t\tcomponent = new CCProgressBar(options, this.ctx);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tCCUtil.Log(`CreateComponent: Component creation failed (${componentType})`);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Returns the component or false\r\n\t\treturn this.AddComponent(component);\r\n\t}\r\n\r\n\t// Higher level method to add component into the CanvasComponentCollection\r\n\tAddComponent(component)\r\n\t{\r\n\t\tif(this.CanvasComponentCollection.AddComponent(component))\r\n\t\t\treturn component;\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\t// Higher level method to remove component from the CanvasComponentCollection\r\n\tRemoveComponent(component)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.RemoveComponent(component);\r\n\t}\r\n\r\n\t// Higher level method to find a component from the CanvasComponentCollection\r\n\tFindComponent(component)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.FindComponent(component);\r\n\t}\r\n\r\n\t// Higher level method to find a component by unique id from the CanvasComponentCollection\r\n\tFindComponentById(id)\r\n\t{\r\n\t\treturn this.CanvasComponentCollection.FindComponentById(component);\r\n\t}\r\n\r\n\tGetContext()\r\n\t{\r\n\t\treturn this.ctx;\r\n\t}\r\n\r\n\t// Actually the main loop\r\n\tLoop()\r\n\t{\r\n\t\t// Begin fps measurement\r\n\t\tthis.stats.begin();\t\r\n\r\n\t\tthis.t.now = CCUtil.Timestamp();\r\n\t\tthis.t.ft = this.t.now - this.t.last;\r\n\r\n\t\tif(this.t.ft > 0.25)\r\n\t\t\tthis.t.ft = 0.25;\r\n\r\n\t\tthis.t.last = this.t.now; \r\n\t\tthis.t.acc += this.t.ft;\r\n\r\n\t\twhile(this.t.acc >= this.t.dt) \r\n\t\t{\r\n\t\t\tthis.Update(this.t.dt);\r\n\t\t\t\r\n\t\t\tthis.t.time += this.t.dt;\r\n\t\t\tthis.t.acc -= this.t.dt;\r\n\t\t}\r\n\r\n\t\tthis.Draw();\r\n\r\n\t\t// End fps measurement\r\n\t\tthis.stats.end();\r\n\r\n\t\trequestAnimationFrame(function() { this.Loop(); }.bind(this));\r\n\t}\r\n\r\n\t// Main component draw method and loop\r\n\tDraw()\r\n\t{\r\n\t\t// Clear the canvas, optimize later if enough brain\r\n\t\tthis.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n\t\t// Draw everything\r\n\t\tfor(var component in this.CanvasComponentCollection.collection)\r\n\t\t{\r\n\t\t\tif(!this.CanvasComponentCollection.collection.hasOwnProperty(component))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tthis.CanvasComponentCollection.collection[component].Draw();\r\n\t\t}\r\n\t}\r\n\r\n\t// Main component update method and loop\r\n\tUpdate(dt)\r\n\t{\r\n\t\tvar self = this;\r\n\r\n\t\tif(this.mouseState.isDown)\r\n\t\t{\r\n\t\t\tthis.mouseState.downElapsedTime = this.t.time - this.mouseState.downStartTime;\r\n\r\n\t\t\tif(this.mouseState.downElapsedTime > 5 && !this.mouseState.dragEventFired)\r\n\t\t\t{\r\n\t\t\t\tthis.mouseState.dragEventFired = true;\r\n\r\n\t\t\t\t// Get all components under mouse click coordinates\r\n\t\t\t\tthis.componentsDragged = this.CanvasComponentCollection.GetComponentsAtPoint(this.mouseState.x, this.mouseState.y);\r\n\r\n\t\t\t\t// Set focus of every component to false\r\n\t\t\t\tthis.componentsDragged.forEach(function(component)\r\n\t\t\t\t{\r\n\t\t\t\t\tcomponent.isDragged = true;\r\n\t\t\t\t\tcomponent.relativeMouseX = self.mouseState.x - component.options.x;\r\n\t\t\t\t\tcomponent.relativeMouseY = self.mouseState.y - component.options.y;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var component in this.CanvasComponentCollection.collection)\r\n\t\t{\r\n\t\t\tif(!this.CanvasComponentCollection.collection.hasOwnProperty(component))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tthis.CanvasComponentCollection.collection[component].Update(dt, this.mouseState);\r\n\t\t}\r\n\t}\r\n\r\n\t// Click event handler\r\n\te_onClick(e)\r\n\t{\r\n\t\tvar self = this;\r\n\r\n\t\t// Get all components under mouse click coordinates\r\n\t\tvar components = this.CanvasComponentCollection.GetComponentsAtPoint(e.clientX, e.clientY);\r\n\r\n\t\t// Set focus of every component to false\r\n\t\tthis.CanvasComponentCollection.GetComponents().forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent.hasFocus = false;\r\n\t\t});\r\n\r\n\t\t// Call the click events of all components returned by GetComponentsAtPoint\r\n\t\tcomponents.forEach(function(component)\r\n\t\t{\r\n\t\t\tif(component.ComponentType === CanvasComponent.RADIO)\r\n\t\t\t{\r\n\t\t\t\tself.CanvasComponentCollection.GetComponentsOfType(CanvasComponent.RADIO).forEach(function(radio)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(radio.GetGroup() === component.GetGroup())\r\n\t\t\t\t\t\tradio.SetState(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tcomponent._mouseEvent(ComponentEvent.CLICK, e);\r\n\t\t});\r\n\t}\r\n\r\n\t// Double click event handler\r\n\te_onDblClick(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse down event handler\r\n\te_mouseDown(e)\r\n\t{\r\n\t\tthis.mouseState.isDown = true;\r\n\t\tthis.mouseState.downStartTime = this.t.time;\r\n\t\tthis.mouseState.ldx = e.clientX;\r\n\t\tthis.mouseState.ldy = e.clientY;\r\n\t}\r\n\r\n\t// Mouse up event handler\r\n\te_mouseUp(e)\r\n\t{\r\n\t\tthis.mouseState.isDown = false;\r\n\t\tthis.mouseState.dragEventFired = false;\r\n\r\n\t\tthis.componentsDragged.forEach(function(component)\r\n\t\t{\r\n\t\t\tcomponent.isDragged = false;\r\n\t\t});\r\n\t}\r\n\r\n\t// Mouse enter event handler\r\n\te_mouseEnter(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse leave event handler\r\n\te_mouseLeave(e)\r\n\t{\r\n\t\t\r\n\t}\r\n\r\n\t// Mouse over event handler\r\n\te_mouseOver(e)\r\n\t{\r\n\r\n\t}\r\n\r\n\t// Mouse out event handler\r\n\te_mouseOut(e)\r\n\t{\r\n\r\n\t}\r\n\r\n\t// Mouse move event handler\r\n\te_mouseMove(e)\r\n\t{\r\n\t\tthis.mouseState.lx = this.mouseState.x;\r\n\t\tthis.mouseState.ly = this.mouseState.y;\r\n\t\tthis.mouseState.x = e.clientX;\r\n\t\tthis.mouseState.y = e.clientY;\r\n\t\tthis.mouseState.dx = this.mouseState.x - this.mouseState.lx;\r\n\t\tthis.mouseState.dy = this.mouseState.y - this.mouseState.ly;\r\n\r\n\t\t// Should probably move this to Update loop\r\n\t\tthis.CanvasComponentCollection.GetComponents().forEach(function(component)\r\n\t\t{\r\n\t\t\tif(CCUtil.Collides(component._getBoundingBox(), e.clientX, e.clientY))\r\n\t\t\t{\r\n\t\t\t\tif(!component.isMouseOver)\r\n\t\t\t\t\tcomponent._mouseEvent(ComponentEvent.MOUSE_OVER, e);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(component.isMouseOver)\r\n\t\t\t\t\tcomponent._mouseEvent(ComponentEvent.MOUSE_OUT, e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Mouse scroll event handler\r\n\te_mouseScroll(e)\r\n\t{\r\n\t\t\r\n\t}\r\n}"]}